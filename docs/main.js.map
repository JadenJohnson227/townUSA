{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/familySearchX/FHTLX.ts","./src/app/familySearchX/FamilySearchX.ts","./src/app/familySearchX/docCookies.ts","./src/app/footer/footer.component.ts","./src/app/footer/footer.component.html","./src/app/instructions/instructions.component.ts","./src/app/instructions/instructions.component.html","./src/app/map/map.component.ts","./src/app/map/map.component.html","./src/app/material/material.module.ts","./src/app/popup-warning/popup-warning.component.ts","./src/app/popup-warning/popup-warning.component.html","./src/app/search/search.component.ts","./src/app/search/search.component.html","./src/app/services/backend.service.ts","./src/app/services/filter-state.service.ts","./src/app/services/fs/fs.service.ts","./src/app/services/links/links.service.ts","./src/app/services/utils/utils.service.ts","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuardService } from './services/auth-guard/auth-guard.service';\r\nimport { MapComponent } from './map/map.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', redirectTo: '/map', pathMatch: 'full' },\r\n  { path: 'map', component: MapComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' })],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { LinksService } from './services/links/links.service';\r\nimport { FsService } from './services/fs/fs.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.css']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  public title: string;\r\n\r\n  constructor(private fsService: FsService, private router: Router, public links: LinksService, private route: ActivatedRoute) {\r\n    this.title = links.APP_NAME.replace(' ', ''); //Set the title for the page\r\n\r\n    // Uncomment to enable google analytics\r\n    // this.router.events.subscribe(event => {\r\n    //   if (event instanceof NavigationEnd) {\r\n    //     (<any>window).ga('set', 'page', event.urlAfterRedirects);\r\n    //     (<any>window).ga('send', 'pageview');\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  //Add more routes here as needed for the main menu\r\n\r\n  ngOnInit() {\r\n    let loggedIn = this.fsService.checkLoginStatus();\r\n\r\n    if (loggedIn) {\r\n      //this.goHome();\r\n      //todo: set this up\r\n    } else if (!window.location.href.includes('fstoken')) {\r\n      if (window.location.href.includes('home')) {\r\n        this.router.navigateByUrl('expired');\r\n      } else {\r\n        //this.router.navigateByUrl('start');\r\n      }\r\n    }\r\n  }\r\n\r\n  goHome() {\r\n    this.router.navigate([this.links.getHome()]);\r\n  }\r\n\r\n  goToRoute(link: string) {\r\n    if (link.includes('http')) {\r\n      window.open(link, '_blank');\r\n    } else if (link === 'home') {\r\n      this.goHome();\r\n    } else {\r\n      this.router.navigate([link]);\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"all-wrap\">\r\n\r\n  <div class=\"page-wrap\">\r\n    <!-- uncomment for header -->\r\n    <!-- <mat-toolbar color=\"primary\" class=\"mat-elevation-z6 main-toolbar\">\r\n      <mat-toolbar-row>\r\n        <button mat-button class=\"home-button\" (click)=\"goHome()\"><img src=\"assets/images/app-logo.png\">\r\n          {{title}}</button>\r\n\r\n        <span class=\"header-spacer\"></span> --> \r\n\r\n        <!-- <span class=\"menu-standard\">\r\n          <button mat-button (click)=\"goToRoute(option.href)\"\r\n            *ngFor=\"let option of links.mainMenu\">{{option.name}}</button>\r\n        </span>\r\n\r\n        <span class=\"menu-compact\">\r\n          <mat-menu #appMenu=\"matMenu\">\r\n            <button mat-button (click)=\"goToRoute(option.href)\" *ngFor=\"let option of links.mainMenu\"\r\n              class=\"menu-compact-button\">{{option.name}}</button>\r\n          </mat-menu>\r\n\r\n          <button mat-icon-button [matMenuTriggerFor]=\"appMenu\">\r\n            <mat-icon>more_vert</mat-icon>\r\n          </button>\r\n        </span>\r\n      </mat-toolbar-row>\r\n    </mat-toolbar> -->\r\n\r\n    <main class=\"content\">\r\n      <router-outlet></router-outlet>\r\n    </main>\r\n\r\n    <!-- <app-footer></app-footer> -->\r\n  </div>\r\n</div>","import { BrowserModule } from '@angular/platform-browser';\r\nimport { NgModule } from '@angular/core';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\nimport { ServiceWorkerModule } from '@angular/service-worker';\r\nimport { environment } from '../environments/environment';\r\nimport { MaterialModule } from './material/material.module';\r\n\r\nimport { FooterComponent } from './footer/footer.component';\r\nimport { MapComponent } from './map/map.component';\r\nimport { InstructionsComponent } from './instructions/instructions.component';\r\nimport { SearchComponent } from './search/search.component';\r\nimport { PopupWarningComponent } from './popup-warning/popup-warning.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AppComponent,\r\n        FooterComponent,\r\n        MapComponent,\r\n        InstructionsComponent,\r\n        SearchComponent,\r\n        PopupWarningComponent,\r\n    ],\r\n    imports: [\r\n        BrowserModule,\r\n        AppRoutingModule,\r\n        BrowserAnimationsModule,\r\n        HttpClientModule,\r\n        MaterialModule,\r\n        BrowserModule,\r\n        FormsModule,\r\n        ServiceWorkerModule.register('ngsw-worker.js', { enabled: environment.production })\r\n    ],\r\n    providers: [],\r\n    bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n","import { docCookies } from './docCookies';\r\nimport { FamilySearch, FamilySearchX, FSInitOptions } from './FamilySearchX';\r\n\r\nconst TOKEN_LENGTH = 3600; //86400\r\n\r\nexport interface FsSession {\r\n    admin: boolean;\r\n    exp: number;\r\n    fs_access_token: string;\r\n    fs_user: {\r\n        displayName: string;\r\n        email: string;\r\n        pid: string;\r\n    }\r\n    iat: number\r\n}\r\n\r\nexport class FHTLX extends FamilySearchX{\r\n\r\n    private saveAccessToken: boolean;\r\n    private accessToken: string;\r\n    private tokenCookie: string;\r\n    private tokenCookiePath: string;\r\n\r\n    readonly PARENT_DOMAIN: string = '';\r\n\r\n\r\n    public static authServiceRedirect(redirectUri: string): void{\r\n        FamilySearchX.uploadConfig(redirectUri, (options: FSInitOptions) => {\r\n            let request = new XMLHttpRequest();\r\n            let uri = \"https://auth.familytech.byu.edu/?redirect=\" + options.redirectUri;\r\n            request.open(\"GET\", uri);\r\n            request.send();\r\n        }, (error: any) => {\r\n\r\n        })\r\n    }\r\n\r\n    public static finishAuthService(configLocation: string, callback: (fhtlx: FHTLX) => void, failureUri?: string): void{\r\n        let accessToken: string = null;\r\n\r\n        if(accessToken = localStorage.getItem(\"fs_access_token\")){\r\n            // accessToken = window.location.href.split(\"fstoken=\")[1];\r\n            // console.log(\"Access Token:\", accessToken);\r\n        }\r\n\r\n        FamilySearchX.uploadConfig(configLocation, (initOptions) => {\r\n\r\n            let fhtlx = new FHTLX(initOptions);\r\n\r\n            // If we already have the token, set it in the cookie.\r\n            if(accessToken){\r\n                fhtlx.setAccessToken(accessToken);\r\n            }\r\n            \r\n\r\n            let verifyToken = (error: any, response: any) => {\r\n                if(!!error){\r\n                    console.error(\"Could not obtain auth token.\");\r\n                }\r\n                else{\r\n                    callback(fhtlx);\r\n                }\r\n            };\r\n            if(fhtlx.getAccessToken() as any){\r\n                callback(fhtlx);\r\n            }\r\n            else if(!(fhtlx.oauthResponse(verifyToken) as any) && failureUri){\r\n                (window as any).location = failureUri;\r\n            }\r\n\r\n        }, (error: any) => {\r\n            console.error(\"err:\", error);\r\n            // window.location = 'login';\r\n            if(failureUri){\r\n                (window as any).location = failureUri;\r\n            }\r\n        });\r\n    }\r\n\r\n    public setAccessToken(accessToken: string): FamilySearch {\r\n        this.accessToken = accessToken;\r\n        if(this.saveAccessToken){\r\n            // Expire in 24 hours because tokens never last longer than that, though\r\n            // they can expire before that after 1 hour of inactivity.\r\n            docCookies.setItem(this.tokenCookie, accessToken, TOKEN_LENGTH, this.tokenCookiePath, this.PARENT_DOMAIN);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public assignAccessToken(accessToken: string): void {\r\n        this.accessToken = accessToken;\r\n    }\r\n\r\n    public storeSession(fsSession: FsSession) {\r\n        this.setAccessToken(fsSession.fs_access_token);\r\n        docCookies.setItem('FS_SESSION', JSON.stringify(fsSession), TOKEN_LENGTH, this.tokenCookiePath, this.PARENT_DOMAIN);\r\n    }\r\n\r\n    public readyAccessToken(fsSession: FsSession): void {\r\n        this.accessToken = fsSession.fs_access_token;\r\n        this.userPID = fsSession.fs_user.pid;\r\n    }\r\n\r\n    public deleteSession(): void {\r\n        this.deleteAccessToken();\r\n        docCookies.removeItem('FS_SESSION', this.tokenCookiePath, this.PARENT_DOMAIN);\r\n    }\r\n\r\n    public static checkAccessToken(): FsSession {\r\n        let sessionStr = docCookies.getItem('FS_SESSION');\r\n        if (!!sessionStr) {\r\n            try {\r\n                let fsSession: FsSession = JSON.parse(sessionStr);\r\n                return fsSession;\r\n            } catch (err) {\r\n                return undefined;\r\n            }\r\n        } else {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n}","\r\n/*======================================================================================================\r\n[][][][]/\r\n[][][][]    Licensure\r\n[][][][]\\\r\n\r\nAlthough this SDK does not directly include any code from the \"Lite JS SDK for the FamilySearch API\"\r\ngithub project (https://github.com/FamilySearch/fs-js-lite), it is designed to be compatible therewith.\r\nAs such, we will post their MIT licensure statement here, noting that the code in this project is\r\nthe exclusive property of Brigam Young University, and was developed by student researchers in the\r\nBYU Family History Technology Lab as an extension to the aformentioned project.\r\n\r\nLite JS SDK for the FamilySearch API License:\r\n--------------------------------------------------------------------------------\r\nMIT License\r\n\r\nCopyright (c) 2016 York Solutions\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n--------------------------------------------------------------------------------\r\n\r\n\r\n======================================================================================================*/\r\n\r\n/*=============================================================================================\r\n[][][][]/\r\n[][][][]    FamilySearch Definitions\r\n[][][][]\\\r\n=============================================================================================*/\r\n// #region FS Definitions\r\n\r\n\r\ntype FSHeaders = {[k:string]: string |  number};\r\ntype HTTPMethod = \"GET\" | \"PUT\" | \"POST\" | \"DELETE\";\r\ntype Handler = (error: any, response: any) => void;\r\ntype Callback = () => void;\r\ntype FSEnvironment = \"production\" | \"beta\" | \"integration\";\r\ntype PID = string;\r\n\r\nclass FSLink{\r\n    href: string;\r\n    offset?: number;\r\n    template?: string;\r\n    title?: string;\r\n    type?: string;\r\n    accept?: string;\r\n    allow?: string;\r\n    hreflang?: string;\r\n}\r\n\r\nclass FSResourceReference{\r\n    resourceId: string;\r\n    resource: string;\r\n}\r\n\r\nclass FSExtensibleData{\r\n    id: string;\r\n}\r\n\r\nclass FSHypermediaEnabledData extends FSExtensibleData{\r\n    links: {[k:string]: FSLink} = {};\r\n}\r\n\r\nclass FSFamilyView extends FSHypermediaEnabledData{\r\n    parent1: FSResourceReference;\r\n    parent2: FSResourceReference;\r\n    children?: FSResourceReference[] = [];\r\n}\r\n\r\nclass FSAttribution extends FSExtensibleData{\r\n    contributor: FSResourceReference;\r\n    modified: number;\r\n    changeMessage: string;\r\n    creator: FSResourceReference;\r\n    created: number;\r\n}\r\n\r\nclass FSQualifier{\r\n    name: string;\r\n    value: string;\r\n}\r\n\r\nclass FSSourceReference extends FSHypermediaEnabledData{\r\n    attribution: FSAttribution;\r\n    description: string;\r\n    descriptionID: string;\r\n    qualifiers: FSQualifier[] = [];\r\n}\r\n\r\nclass FSNote extends FSHypermediaEnabledData{\r\n    lang: string;\r\n    subject: string;\r\n    text: string;\r\n    attribution: FSAttribution;\r\n}\r\n\r\nclass FSConclusion extends FSHypermediaEnabledData{\r\n    sortKey: string;\r\n    attribution: FSAttribution;\r\n    sources: FSSourceReference[];\r\n    analysis: FSResourceReference;\r\n    notes: FSNote[] = [];\r\n}\r\n\r\nclass FSGender extends FSConclusion{\r\n    type: string;\r\n}\r\n\r\nclass FSTextValue{\r\n    lang: string;\r\n    value: string;\r\n}\r\n\r\nclass FSDate extends FSExtensibleData{\r\n    normalized: FSTextValue[] = [];\r\n    original: string;\r\n    formal: string;\r\n}\r\n\r\nclass FSNamePart extends FSExtensibleData{\r\n    type: string;\r\n    value: string;\r\n    qualifiers: FSQualifier[] = [];\r\n}\r\n\r\nclass FSNameForm extends FSExtensibleData{\r\n    lang: string;\r\n    fullText: string;\r\n    parts: FSNamePart[] = [];\r\n}\r\n\r\nclass FSName extends FSConclusion{\r\n    type: string;\r\n    preferred: boolean;\r\n    date: FSDate;\r\n    nameForms: FSNameForm[] = [];\r\n}\r\n\r\nclass FSPlaceReference extends FSExtensibleData{\r\n    normalized: FSTextValue[] = [];\r\n    original: string;\r\n}\r\n\r\nclass FSFact extends FSConclusion{\r\n    type: string;\r\n    date: FSDate;\r\n    place: FSPlaceReference;\r\n    value: string;\r\n    qualifiers: FSQualifier[] = [];\r\n}\r\n\r\nclass FSDisplayProperties extends FSExtensibleData{\r\n    name: string;\r\n    gender: string;\r\n    lifespan: string;\r\n    birthDate: string;\r\n    birthPlace: string;\r\n    deathDate: string;\r\n    deathPlace: string;\r\n    marriageDate: string;\r\n    marriagePlace: string;\r\n    ascendancyNumber: string;\r\n    descendancyNumber: string;\r\n    familiesAsParent: FSFamilyView[] = [];\r\n    familiesAsChild: FSFamilyView[] = [];\r\n}\r\n\r\nclass FSEvidenceReference extends FSHypermediaEnabledData{\r\n    resourceId: string;\r\n    resource: string;\r\n    attribution: FSAttribution;\r\n}\r\n\r\nclass FSSubject extends FSConclusion{\r\n    extracted: boolean;\r\n    evidence: FSEvidenceReference[] = [];\r\n    media: FSSourceReference[] = [];\r\n    identifiers: {[k:string]: string} = {};\r\n}\r\n\r\nclass FSPerson extends FSSubject{\r\n    display: FSDisplayProperties;\r\n    private: boolean;\r\n    living: boolean;\r\n    gender: FSGender;\r\n    names: FSName[] = [];\r\n    facts: FSFact[] = [];\r\n}\r\n\r\nclass FSRelationship extends FSSubject{\r\n    type: string;\r\n    person1: FSResourceReference;\r\n    person2: FSResourceReference;\r\n    facts: FSFact[] = [];\r\n}\r\n\r\nclass FSChildAndParentRelationship extends FSSubject{\r\n    father: FSResourceReference;\r\n    mother: FSResourceReference;\r\n    child: FSResourceReference\r\n    fatherFacts: FSFact[] = [];\r\n    motherFacts: FSFact[] = [];\r\n}\r\n\r\nclass FSUser extends FSExtensibleData{\r\n    contactName: string;\r\n    helperAccessPin: string;\r\n    fullName?: string;\r\n    givenName: string;\r\n    familyName: string;\r\n    email: string;\r\n    alternateEmail: string;\r\n    country: string;\r\n    gender: \"MALE\" | \"FEMALE\" | \"UNKNOWN\";\r\n    birthDate: string;\r\n    phoneNumber?: string;\r\n    mobilePhoneNumber?: string;\r\n    mailingAddress?: string\r\n    perferredLanguage?: string;\r\n    displayName: string;\r\n    personId: PID;\r\n    treeUserId: string;\r\n    links: {[k:string]: FSLink} = {};\r\n}\r\n\r\ntype FSRequestOpt = {\r\n    method?: HTTPMethod,\r\n    headers?: FSHeaders,\r\n    body?: string | object,\r\n}\r\n\r\ntype FSResponse = {\r\n    statusCode: number,\r\n    statusText: string,\r\n    headers: FSHeaders,\r\n    body: string,\r\n    data?: any,\r\n    originalUrl: string,\r\n    effectiveUrl: string,\r\n    requestMethod: string,\r\n    requestHeaders: FSHeaders,\r\n    redirected: boolean,\r\n    throttled: boolean,\r\n    retries: number,\r\n}\r\n\r\nexport type FSInitOptions = {\r\n    environment: FSEnvironment,\r\n    appKey: string,\r\n    redirectUri: string,\r\n    accessToken?: string,\r\n    saveAccessToken?: boolean,\r\n    tokenCookie?: string,\r\n    tokenCookiePath?: string,\r\n    maxThrottledRetries?: number,\r\n    pendingModifications?: string[],\r\n    requestInterval?: number,\r\n}\r\n\r\nexport declare class FamilySearch{\r\n    constructor(initOptions?: FSInitOptions);\r\n    config(initOptions?: FSInitOptions): void;\r\n\r\n    /*\r\n     * REQUEST METHODS\r\n     */\r\n    get(url: string, handler: Handler): void;\r\n    post(url: string, options: FSRequestOpt, handler: Handler): void;\r\n    head(url: string, handler: Handler): void;\r\n    delete(url: string, handler: Handler): void;\r\n    get(url: string, options: FSRequestOpt, handler: Handler): void;\r\n    request(url: string, options: FSRequestOpt, handler: Handler): void;\r\n    request(url: string, handler: Handler): void;\r\n\r\n    /*\r\n     * AUTHENTICATION\r\n     */\r\n    oauthRedirectURL(state?: any): void;\r\n    oauthRedirect(state?: any): void;\r\n    oauthToken(code: any, callback: Handler): void;\r\n    oauthUnauthenticatedToken(ipAddress: string, callback: Handler): void;\r\n    oauthResponse(callback: Handler): void;\r\n    oauthResponse(state: any[], callback: Handler): void;\r\n    oauthPassword(username: string, password: string, callback: Handler): void;\r\n    setAccessToken(accessToken: string): void;\r\n    getAccessToken(): void;\r\n    deleteAccessToken(): void;\r\n\r\n    /*\r\n     * MIDDLEWARE\r\n     */\r\n    addRequestMiddleware(middleware: (client: any, request: object, next: Function) => void): void;\r\n    addRequestMiddleware(middleware: (client: any, request: object, response: object, next: Function) => void): void;\r\n}\r\n\r\n// #endregion\r\n\r\n\r\n/*=============================================================================================\r\n[][][][]/\r\n[][][][]    FamilySearchX Definition\r\n[][][][]\\\r\n=============================================================================================*/\r\n// #region FSX Definition\r\nexport class FamilySearchX extends FamilySearch{\r\n\r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    Init & Utils\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region Init and Utils\r\n\r\n    /**\r\n     * This method is designed principally as a means of loading up a configuration file.\r\n     * @param uri \r\n     * @param handler \r\n     */\r\n    public static uploadConfig(uri: string, handler: (options: FSInitOptions) => void, errorHandler: Function){\r\n\r\n        let request = new XMLHttpRequest();\r\n        request.addEventListener(\"load\", function(){\r\n            let data = this.response;\r\n            if(data instanceof String){\r\n                handler(JSON.parse(data as string));\r\n            }\r\n            else{\r\n                handler(data);\r\n            }\r\n        });\r\n        request.addEventListener(\"error\", function(){\r\n            errorHandler(this.response);\r\n        });\r\n        request.open(\"GET\", uri);\r\n        request.responseType = \"json\";\r\n        request.send();\r\n    }\r\n\r\n    public userPID: string;\r\n\r\n    constructor(options: FSInitOptions){\r\n        super(options);\r\n        this.userPID = \"\";\r\n    }\r\n\r\n    public logout(handler: Handler){\r\n        this.post(\"/platform/logout\", {}, (error: any, response: FSResponse) => {\r\n            console.log(\"%c User has been logged out\", \"color: #ffdd00\");\r\n            handler && handler(error, response);\r\n        });\r\n    }\r\n\r\n    public isPID(field: PID | string): field is PID{\r\n        return !!(/[a-zA-Z0-9]{4}-[a-zA-Z0-9]{3}/g).exec(field);\r\n    }\r\n\r\n    // #endregion\r\n\r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    User API\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region User API\r\n\r\n    /**\r\n     * Gets the current user person\r\n     * @param handler \r\n     */\r\n    public getCurrentTreePerson(handler: Handler): void{\r\n        this.get('/platform/tree/current-person', handler);\r\n    }\r\n\r\n    /**\r\n     * Gets the information for the current user.\r\n     * @param handler \r\n     */\r\n    public getCurrentUser(handler: (error: any, user: FSUser) => void): void{\r\n        this.get('/platform/users/current', (error, response) => {\r\n            try{\r\n                if(!error){\r\n                    let res: {users: FSUser[]} = (JSON.parse(response.body));\r\n                    let user = res.users[0];\r\n                    this.userPID = user.personId;\r\n                    handler(error, user);\r\n                }\r\n            }\r\n            catch(e){\r\n                handler({apiError: error, parsingError:e}, null);\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets a FamilySearch person information for a user.\r\n     * @param user \r\n     * @param handler \r\n     */\r\n    public getPersonFromUser(user: FSUser, handler: Handler): void{\r\n        if(!!user.links && !!user.links.person){\r\n            this.get(user.links.person.href, handler);\r\n        }\r\n        else{\r\n            this.get(\"/platform/tree/persons/\" + user.personId, handler);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the user's ancestry and returns the RAW results.\r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails \r\n     * @param descendants \r\n     * @param personDetails \r\n     */\r\n    public getUserWithAncestry(handler: Handler, generations: number = 8, spouse: string = \"\", marriageDetails: boolean, descendants: boolean, personDetails: boolean): void{\r\n        if(!this.userPID){\r\n            this.getCurrentUser((error: any, user:FSUser) => {\r\n                this.getUserWithAncestry(handler, generations, spouse, marriageDetails, descendants, personDetails);\r\n            });\r\n            return;\r\n        }\r\n        else{\r\n            this.getPersonWithAncestry(this.userPID, handler, generations, spouse, marriageDetails, descendants, personDetails);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets the user's descendancy and returns the RAW results.\r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails\r\n     * @param personDetails \r\n     */\r\n    public getUserWithDescendancy(handler: Handler, generations: number = 2, spouse: string = \"\", marriageDetails: boolean, personDetails: boolean): void{\r\n        if(!this.userPID){\r\n            this.getCurrentUser((error: any, user:FSUser) => {\r\n                this.getUserWithDescendancy(handler, generations, spouse, marriageDetails, personDetails);\r\n            });\r\n            return;\r\n        }\r\n        else{\r\n            this.getPersonWithDescendancy(this.userPID, handler, generations, spouse, marriageDetails, personDetails);\r\n        }\r\n    }\r\n\r\n    // #endregion\r\n\r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    Person API\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region Person API\r\n\r\n    /**\r\n     * Get a particular person's data from the family tree\r\n     * @param pid \r\n     * @param handler \r\n     * @param relatives (Optional) boolean whether or not relatives should be included with the results. Defaults to false\r\n     * @param sourceDescriptions (Optional) boolean whether or not sourceDescriptions should be included with the results. Defaults to false\r\n     */\r\n    public getPerson(pid: PID, handler: Handler, relatives: boolean = false, sourceDescriptions: boolean = false): void{\r\n        let uri: string = '/platform/tree/persons/' + pid;\r\n        let params: string[] = [];\r\n        if(relatives){\r\n            params.push(\"relatives=true\");\r\n        }\r\n        if(sourceDescriptions){\r\n            params.push(\"sourceDescriptions=true\");\r\n        }\r\n        if(params.length){\r\n            uri += \"?\" + params.join(\"&\");\r\n        }\r\n        this.get(uri, handler);\r\n    }\r\n\r\n    /**\r\n     * Get the data for a collection of people.\r\n     * @param pids \r\n     * @param handler \r\n     */\r\n    public getPersons(pids: PID[], handler: Handler): void{\r\n        const limit: number = 500;\r\n        \r\n        // Handle inproperly sized requests.\r\n        if(pids.length > limit){\r\n            console.error(\"getPersons() called to FS with\", pids.length, \"ids. The limit is\", limit, \".\");\r\n            pids = pids.slice(0,limit);\r\n        }\r\n\r\n        const list: string = pids.reduce((curr: string, pid: PID) => \r\n            curr += (pid + \",\")\r\n        , \"\").substr(0, -1);\r\n\r\n        // Final API call\r\n        this.get('/platform/tree/persons?pids=' + list, handler)\r\n    }\r\n\r\n    /**\r\n     * Gets a person with their ancestry and returns the RAW results.\r\n     * @param pid \r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails \r\n     * @param descendants \r\n     * @param personDetails \r\n     */\r\n    public getPersonWithAncestry(pid: PID, handler: Handler, generations: number = 2, spouse: string = \"\", marriageDetails: boolean, descendants: boolean, personDetails: boolean): void{\r\n        const maxGenerations: number = 8;\r\n        \r\n        const baseUri = \"/platform/tree/ancestry?person=\" + pid;\r\n        \r\n        let uri = baseUri;\r\n\r\n        if(generations > 0){\r\n            if(generations > maxGenerations){\r\n                console.error(\"getPersonWithDescendancy() requested\", generations, \"generations. The limit is\", maxGenerations, \".\");\r\n                generations = maxGenerations;\r\n            }\r\n            uri += \"&generations=\" + generations;\r\n        }\r\n\r\n        if(spouse != \"\"){\r\n            uri += \"&spouse=\" + spouse;\r\n        }\r\n\r\n        if(marriageDetails){\r\n            uri += \"&marriageDetails=true\";\r\n        }\r\n\r\n        if(personDetails){\r\n            uri += \"&personDetails=true\";\r\n        }\r\n\r\n        if(descendants){\r\n            uri += \"&descendants=true\";\r\n        }\r\n\r\n        console.log(uri);\r\n        this.get(uri, handler);\r\n    }\r\n\r\n    /**\r\n     * Gets a person with their descendancy and returns the RAW results.\r\n     * @param pid \r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails \r\n     * @param personDetails \r\n     */\r\n    public getPersonWithDescendancy(pid: PID, handler: Handler, generations: number = 2, spouse: string = \"\", marriageDetails: boolean, personDetails: boolean): void{\r\n        const maxGenerations: number = 2;\r\n        \r\n        const baseUri = \"/platform/tree/descendancy?person=\" + pid;\r\n        \r\n        let uri = baseUri;\r\n\r\n        if(generations > 0){\r\n            if(generations > maxGenerations){\r\n                console.error(\"getPersonWithDescendancy() requested\", generations, \"generations. The limit is\", maxGenerations, \".\");\r\n                generations = maxGenerations;\r\n            }\r\n            uri += \"&generations=\" + generations;\r\n        }\r\n\r\n        if(spouse != \"\"){\r\n            uri += \"&spouse=\" + spouse;\r\n        }\r\n\r\n        if(marriageDetails){\r\n            uri += \"&marriageDetails=true\";\r\n        }\r\n\r\n        if(personDetails){\r\n            uri += \"&personDetails=true\";\r\n        }\r\n\r\n        this.get(uri, handler);\r\n    }\r\n\r\n    /**\r\n     * Gets a person with their ancestry and returns the processed results.\r\n     * @param pid \r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails \r\n     * @param personDetails \r\n     */\r\n    public getPersonAncestry(pid: PID, handler: (error: any, data: FSPerson[]) => void, generations: number): void{\r\n        let desc = new FSXAncestryBuilder(this, pid, generations);\r\n        // console.log(\"Running ancestry!\");\r\n        desc.run().then((res) => {\r\n            // console.log(\"Ancestry Data:\", res);\r\n            handler(null, res.people);\r\n        }, (rej) => {\r\n            console.log(\"Ancestry Failed:\", rej);\r\n            handler(rej, []);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Gets a person with their descendancy and returns the processed results.\r\n     * @param pid \r\n     * @param handler \r\n     * @param generations \r\n     * @param spouse \r\n     * @param marriageDetails \r\n     * @param personDetails \r\n     */\r\n    public getPersonDescendancy(pid: PID, handler: (error: any, data: FSPerson[]) => void, generations: number): void{\r\n        let desc = new FSXDescendancyBuilder(this, pid, generations);\r\n        // console.log(\"Running descendancy!\");\r\n        desc.run().then((res) => {\r\n            // console.log(\"Descendancy Data:\", res);\r\n            handler(null, res.people);\r\n        }, (rej) => {\r\n            console.log(\"Descendancy Failed:\", rej);\r\n            handler(rej, []);\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Gets a person's parents.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonWithParents(pid: PID, handler: Handler): void{\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/parents\", handler);\r\n    }\r\n\r\n    /**\r\n     * Gets a person's spouses.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonWithSpouses(pid: PID, handler: Handler): void{\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/spouses\", handler);\r\n    }\r\n\r\n    /**\r\n     * Gets a person's children.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonWithChildren(pid: PID, handler: Handler): void{\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/children\", handler);\r\n    }\r\n\r\n    /**\r\n     * Gets a person's families.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonWithFamilies(pid: PID, handler: Handler, sourceDescriptions: boolean): void{\r\n        let uri: string = \"/platform/tree/persons/\" + pid + \"/families\";\r\n        if(sourceDescriptions){\r\n            uri += \"?sourceDescriptions=true\";\r\n        }\r\n        this.get(uri, handler);\r\n    }\r\n\r\n    // #endregion\r\n\r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    Memories and Sources\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region Memories and Sources\r\n\r\n    /**\r\n     * Retrieves the description for a portrait picture attached as the primary portrait for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param defaultUri An unencoded URI for a default image if no portrait is found.\r\n     */\r\n    public getPersonPortrait(pid: PID, handler: Handler, defaultUri?: string): void{\r\n        let uri = \"/platform/tree/persons/\" + pid + \"/portrait\";\r\n        if(defaultUri){\r\n            uri += \"?default=\" + encodeURIComponent(defaultUri);\r\n        }\r\n        this.get(uri, handler);\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the portrait pictures available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonPortraits(pid: PID, handler: Handler): void{\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/portraits\", handler);\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the memories available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param count <optional> The number of stories to request\r\n     * @param startIndex <optional> The start index for the returned stories\r\n     * @param filter <optional> If there is a particular type of resource desired, a filter may be used. Either \"Photo\", \"Document\", or \"Story\".\r\n     */\r\n    protected getPersonMemories(pid: PID, handler: Handler, count?: number, startIndex?: number, filter?: string): void{\r\n        let url = \"/platform/tree/persons/\" + pid + \"/memories\";\r\n        let params = [];\r\n        if(count > 0){\r\n            params.push(\"count=\" + count);\r\n        }\r\n        if(startIndex > 0){\r\n            params.push(\"start=\" + startIndex);\r\n        }\r\n        if(filter && (filter === \"Photo\" || filter === \"Document\" || filter === \"Story\")){\r\n            params.push(\"type=\" + filter);\r\n        }\r\n        if(params.length){\r\n            url += \"?\" + params.join(\"&\");\r\n        }\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/memories\", handler);\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the story memories available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param count <optional> The number of stories to request. If blank or negative, requests them all.\r\n     * @param startIndex <optional> The start index for the returned stories If blank or negative, defaults to 0.\r\n     */\r\n    public getPersonStoryMemories(pid: PID, handler: Handler, count?: number, startIndex?: number): void{\r\n        this.getPersonMemories(pid, handler, count, startIndex, \"Story\");\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the document memories available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param count <optional> The number of documents to request\r\n     * @param startIndex <optional> The start index for the returned documents\r\n     */\r\n    public getPersonDocumentMemories(pid: PID, handler: Handler, count?: number, startIndex?: number): void{\r\n        this.getPersonMemories(pid, handler, count, startIndex, \"Document\");\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the photo memories available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param count <optional> The number of documents to request\r\n     * @param startIndex <optional> The start index for the returned documents\r\n     */\r\n    public getPersonPhotoMemories(pid: PID, handler: Handler, count?: number, startIndex?: number): void{\r\n        this.getPersonMemories(pid, handler, count, startIndex, \"Photo\");\r\n    }\r\n\r\n    /**\r\n     * Retrieves descriptions for all of the memories available for an individual.\r\n     * @param pid \r\n     * @param handler \r\n     * @param count <optional> The number of photos to request\r\n     * @param startIndex <optional> The start index for the returned photos\r\n     */\r\n    public getAllPersonMemories(pid: PID, handler: Handler, count?: number, startIndex?: number): void{\r\n        this.getPersonMemories(pid, handler, count, startIndex);\r\n    }\r\n\r\n    /**\r\n     * Provides a list of all sources attached to a person.\r\n     * @param pid \r\n     * @param handler \r\n     */\r\n    public getPersonSources(pid: PID, handler: Handler): void{\r\n        this.get(\"/platform/tree/persons/\" + pid + \"/sources\", handler);\r\n    }\r\n\r\n    // #endregion\r\n    \r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    Matches & Duplicates\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region Matches\r\n\r\n    public getPersonDuplicateMatches(pid: PID, handler: Handler, includeNotAMatchDeclarations?: boolean){\r\n        let uri = \"/platform/tree/persons/\" + pid + \"/matches\";\r\n        if(includeNotAMatchDeclarations){\r\n            uri += \"?includeNotAMatchDeclarations=true\"\r\n        }\r\n        this.get(uri, {headers:{\"Accept\":\"application/x-gedcomx-atom+json\"}}, handler);\r\n    }\r\n\r\n    public getPersonRecordMatches(pid: PID, handler: Handler, status: \"pending\" | \"accepted\" | \"rejected\" = \"pending\", count: number = 5, confidence: number = -1){\r\n        \r\n        let uri = \"/platform/tree/persons/\" + pid + \"/matches\";\r\n        let params:string[] = [\r\n            \"status=\" + status,\r\n            \"collection=\" + encodeURIComponent(\"records\"),\r\n            \"count=\" + count\r\n        ];\r\n        if(confidence > -1){\r\n            confidence = Math.min(confidence, 5); // The max cap on this is 5.\r\n            params.push(\"confidence=\" + confidence);\r\n        }\r\n\r\n        // Meld all of the query parameters onto the uri\r\n        if(params.length){\r\n            uri += \"?\" +  params.join(\"&\");\r\n        }\r\n        \r\n        this.get(uri, {headers:{\"Accept\":\"application/x-gedcomx-atom+json\"}}, handler);\r\n    }\r\n\r\n    // #endregion\r\n\r\n    /*=============================================================================================\r\n    [][][][]/\r\n    [][][][]    Redirect To FamilySearch\r\n    [][][][]\\\r\n    =============================================================================================*/\r\n    // #region FamilySearch Redirect\r\n\r\n    /**\r\n     * Opens up a new tab to the FamilySearch person page.\r\n     * Differs from viewInFamilySearchTab() in that the API docs say that eventually it might not require the user to reauthenticate.\r\n     * @param pid \r\n     */\r\n    public openNewTabFamilySearchPerson(pid: PID): void{\r\n        window.open(\"https://api.familysearch.org/redirect?person=\" + pid + \"&access_token=\" + this.getAccessToken());\r\n    }\r\n\r\n    /**\r\n     * Opens up a new tab to the FamilySearch person page.\r\n     * Will definitely require the user to log in to FamilySearch again if they haven't already.\r\n     * @param pid \r\n     */\r\n    public viewInFamilySearchTab(pid: PID): void{\r\n        window.open(\"https://familysearch.org/tree/#view=ancestor&person=\" + pid);\r\n    }\r\n    // #endregion\r\n}\r\n// #endregion\r\n\r\n\r\n/*=============================================================================================\r\n[][][][]/\r\n[][][][]    FamilySearchX Tree Parsing\r\n[][][][]\\\r\n=============================================================================================*/\r\n// #region FSX Tree Parsing\r\n\r\n/**\r\n * FamilySearch currently ships descendancy data with a list of people only connected by a\r\n * descendancyNumber field in their display properties.\r\n * The descendancyNumber is currently a d'Aboville number.\r\n * The FSXdAbovilleData type represents that number in its more useful components\r\n */\r\ntype FSXdAbovilleData = {\r\n    parentA: string,\r\n    parentB: string,\r\n    spouse: string,\r\n    subject: string,\r\n    generation: number;\r\n}\r\n\r\n/**\r\n * FamilySearch currently ships descendancy data with a list of people only connected by a\r\n * descendancyNumber field in their display properties.\r\n * The descendancyNumber is currently a d'Aboville number.\r\n * The FSXdAbovilleParser class provides functionality for converting between the string\r\n * provided and a parsed data object with easy reference to the d'Aboville numbers for parents and the default spouse.\r\n */\r\nclass FSXdAbovilleParser{\r\n    protected parts: string[];\r\n    constructor(){}\r\n\r\n    /**\r\n     * Extracts relevant data from a descendancy number\r\n     * @param daboId the d'Aboville identifier for a particular person within a tree.\r\n     */\r\n    static getData(daboId: string): FSXdAbovilleData{\r\n        let parts = daboId.split(\".\");\r\n        const out: FSXdAbovilleData = {\r\n            parentA: \"\",\r\n            parentB: \"\",\r\n            spouse: \"\",\r\n            subject: parts.join(\".\"),\r\n            generation: parts.length - 1\r\n        }\r\n\r\n        // Calculate Spouse\r\n        out.spouse = parts.slice(0, -1).join(\".\") + (parts.length > 1 ? \".\" : \"\") + this.toggleSpouse(parts[parts.length - 1]);\r\n        const last = parts[parts.length - 1];\r\n        parts = parts.slice(0, -1);\r\n\r\n        if(parts.length && !this.isSpouse(last)){\r\n            if(this.isSpouse(parts[parts.length - 1])){\r\n                out.parentA = parts.slice(0, -1).join(\".\") + (parts.length > 1 ? \".\" : \"\") + this.toggleSpouse(parts[parts.length - 1]);\r\n                out.parentB = parts.join(\".\");\r\n            }\r\n            else{\r\n                out.parentA = parts.join(\".\");\r\n                out.parentB = parts.slice(0, -1).join(\".\") + (parts.length > 1 ? \".\" : \"\") + this.toggleSpouse(parts[parts.length - 1]);\r\n            }\r\n        }\r\n        return out;\r\n    }\r\n\r\n    public static isSpouse(target: string){\r\n        return(target.indexOf(\"-S\") !== -1);\r\n    }\r\n\r\n    public static toggleSpouse(target: string): string{\r\n        if(!this.isSpouse(target)){\r\n            return target + \"-S\";\r\n        }\r\n        else{\r\n            return target.split(\"-S\")[0];\r\n        }\r\n    }\r\n}\r\n\r\nabstract class FSXPedigreeBuilder{\r\n    protected cache: {[k:string]: FSPerson}\r\n    constructor(protected fsx: FamilySearchX, protected pid: PID, protected generations: number){\r\n        if(generations > this.getMaxRecommendedGenerations()){\r\n            console.error(\"You requested downloading\", this.generations, \"generations of data. This may take a while.\");\r\n        }\r\n        this.cache = {};\r\n    }\r\n    \r\n    public run(): Promise<{root: PID, people: FSPerson[]}>{\r\n        let allPeople: FSPerson[] = [];\r\n        return new Promise((resolve: Function, reject: Function) => {\r\n            let leavesOutStanding: number = 0;\r\n            let runStep = (pid: PID, generationsRemaining: number) => {\r\n\r\n                // console.log(\"Step:\", generationsRemaining);\r\n                let nextSet: number = Math.min(generationsRemaining, this.getMaxGenerations());\r\n                leavesOutStanding++;\r\n\r\n                this.runGenerations(pid, nextSet).then((data: {allPeople: FSPerson[], leafIds: PID[]}) => {\r\n                    generationsRemaining -= nextSet;\r\n                    allPeople = allPeople.concat(data.allPeople);\r\n                    if(--leavesOutStanding === 0){\r\n                        resolve({\r\n                            root: this.pid,\r\n                            people: allPeople\r\n                        });\r\n                        return;\r\n                    }\r\n                    if(generationsRemaining !== 0 && data.leafIds.length != 0){\r\n                        data.leafIds.forEach((leaf: PID) => {\r\n                            runStep(leaf, generationsRemaining);\r\n                        });\r\n                    }\r\n                },\r\n                (rejection: any) => {\r\n                    reject(rejection);\r\n                });\r\n            }\r\n            runStep(this.pid, this.generations);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Descendancy data does not ship with relationship references. We're going to add them, so we\r\n     * generate the appropriate arrays in the display properties.\r\n     * @param person \r\n     */\r\n    protected addRelationshipArrays(person: FSPerson): void{\r\n        if(!person.display.familiesAsParent){\r\n            person.display.familiesAsParent = [];\r\n        }\r\n        if(!person.display.familiesAsChild){\r\n            person.display.familiesAsChild = [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds a child for a person under a particular spouse.\r\n     * @param subject The person receiving a child\r\n     * @param spouseId The ID of the other parent of the child\r\n     * @param childId The PID of the child\r\n     */\r\n    protected addChild(subject:FSPerson, spouseId: PID, childId: PID){\r\n        let spouseView: FSFamilyView;\r\n        const childObject: FSResourceReference = {\r\n            resource: \"FSXChildof-\" + subject.id + \",\" + spouseId + \":\" + childId,\r\n            resourceId: childId\r\n        }\r\n        if(!subject.display.familiesAsParent.some((view: FSFamilyView) => {\r\n            if(view.parent1.resourceId === subject.id || view.parent2.resourceId === subject.id){\r\n                spouseView = view;\r\n                if(!view.children.some((ref: FSResourceReference) => {\r\n                    return ref.resourceId === childId\r\n                })){\r\n                    view.children.push(childObject);\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        })){\r\n            spouseView = new FSFamilyView();\r\n            spouseView.links = {};\r\n            spouseView.id = \"FSXFamilyViewof-\" + subject.id + \",\" + spouseId;\r\n            spouseView.parent1 = {\r\n                resource: \"FSXSpouseof-\" + subject.id + \":\" + spouseId,\r\n                resourceId: subject.id\r\n            };\r\n            spouseView.parent2 = {\r\n                resource: \"FSXSpouseof-\" + spouseId + \":\" + subject.id,\r\n                resourceId: spouseId\r\n            };\r\n            spouseView.children = [\r\n                childObject\r\n            ];\r\n            subject.display.familiesAsParent.push(spouseView);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds a spouse to a person, creating a families as parent entry with the designated spouse.\r\n     * @param subject The person receiving a child\r\n     * @param spouseId The ID of the spouse\r\n     */\r\n    protected addSpouse(subject:FSPerson, spouseId: PID){\r\n        let spouseView: FSFamilyView;\r\n        if(!subject.display.familiesAsParent.some((view: FSFamilyView) => {\r\n            return (view.parent1.resourceId === spouseId || view.parent2.resourceId === spouseId);\r\n        })){\r\n            spouseView = new FSFamilyView();\r\n            spouseView.links = {};\r\n            spouseView.id = \"FSXFamilyViewof-\" + subject.id + \",\" + spouseId;\r\n            spouseView.parent1 = {\r\n                resource: \"FSXSpouseof-\" + subject.id + \":\" + spouseId,\r\n                resourceId: subject.id\r\n            };\r\n            spouseView.parent2 = {\r\n                resource: \"FSXSpouseof-\" + spouseId + \":\" + subject.id,\r\n                resourceId: spouseId\r\n            };\r\n            spouseView.children = [];\r\n            subject.display.familiesAsParent.push(spouseView);\r\n        }\r\n        // console.log(\"Added spouse:\", subject.id, spouseId, spouseView);\r\n    }\r\n\r\n    /**\r\n     * Adds a spouse to a person, creating a families as parent entry with the designated spouse.\r\n     * @param subject The person receiving a child\r\n     * @param spouseId The ID of the spouse\r\n     */\r\n    protected addParents(subject:FSPerson, parentAId: PID, parentBId: PID){\r\n        let spouseView: FSFamilyView;\r\n        const childReference: FSResourceReference = {\r\n            resource: \"FSXChildof-\" + parentAId + \",\" + parentBId + \":\" + subject.id,\r\n            resourceId: subject.id\r\n        };\r\n        if(!subject.display.familiesAsChild.some((view: FSFamilyView) => { // If there isn't already a view with these two parents\r\n            if(\r\n                (view.parent1.resourceId == parentAId && view.parent2.resourceId === parentBId) ||\r\n                (view.parent1.resourceId == parentBId && view.parent2.resourceId === parentAId)\r\n            ){ // If there is already a view with these two parents\r\n                if(!view.children.some((ref: FSResourceReference) => { // If they are not already included\r\n                    return(ref.resourceId === subject.id);\r\n                })){ // Then include them in this family\r\n                    view.children.push(childReference); \r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        })){ // Then make one.\r\n            spouseView = new FSFamilyView();\r\n            spouseView.links = {};\r\n            spouseView.id = \"FSXFamilyViewof-\" + parentAId + \",\" + parentBId;\r\n            spouseView.parent1 = {\r\n                resource: \"FSXSpouseof-\" + parentAId + \":\" + parentBId,\r\n                resourceId: parentAId\r\n            };\r\n            spouseView.parent2 = {\r\n                resource: \"FSXSpouseof-\" + parentBId + \":\" + parentAId,\r\n                resourceId: parentBId\r\n            };\r\n            spouseView.children = [childReference];\r\n            subject.display.familiesAsChild.push(spouseView);\r\n        }\r\n        // console.log(\"Added parents:\", subject.id, parentAId, parentBId);\r\n    }\r\n\r\n    public abstract getMaxGenerations(): number;\r\n    public abstract getMaxRecommendedGenerations(): number;\r\n    protected abstract runGenerations(pid: PID, generations: number):Promise<{allPeople: FSPerson[], leafIds: PID[]}>;\r\n}\r\n\r\nclass FSXDescendancyBuilder extends FSXPedigreeBuilder{\r\n    public static readonly MAX_GENERATIONS_PER_CALL = 2;\r\n    public static readonly MAX_GENERATIONS_RECOMMENDED = 5;\r\n\r\n    public getMaxGenerations(): number{\r\n        return FSXDescendancyBuilder.MAX_GENERATIONS_PER_CALL;\r\n    }\r\n\r\n    public getMaxRecommendedGenerations(): number{\r\n        return FSXDescendancyBuilder.MAX_GENERATIONS_RECOMMENDED;\r\n    }\r\n\r\n    protected runGenerations(pid: PID, generations: number):Promise<{allPeople: FSPerson[], leafIds: PID[]}>{\r\n        return new Promise((resolve: Function, reject: Function) => {\r\n            this.fsx.getPersonWithDescendancy(this.pid, (error: any, response: FSResponse) => {\r\n                if(error){\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                if(!!response.data){ // Check for JSON data.\r\n                    resolve(this.connectDescendancyData(response.data.persons, generations));\r\n                    return;\r\n                }\r\n                resolve();\r\n            }, generations, \"\", true, true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Given a group of people, it will attach the PID's of linked family members to the people,\r\n     * creating a tree that is more intuitive than using the d'Aboville numbers.\r\n     * @param people \r\n     */\r\n    private connectDescendancyData(people: FSPerson[], generations: number): {allPeople: FSPerson[], leafIds: PID[]}{\r\n        let leaves: PID[] = [];\r\n        let descMap: {[k: string]: PID} = {};\r\n\r\n        // Cache, fill out the relationship areas, and store the descendancyNumber;\r\n        people.forEach((subject: FSPerson) => {\r\n            if(!this.cache[subject.id]){\r\n                this.cache[subject.id] = subject;\r\n            }\r\n            this.addRelationshipArrays(subject);\r\n            descMap[subject.display.descendancyNumber] = subject.id;\r\n        });\r\n\r\n        let data: FSXdAbovilleData,\r\n            parentAId: PID,\r\n            parentBId: PID,\r\n            spouseId: PID,\r\n            parentA: FSPerson,\r\n            parentB: FSPerson,\r\n            spouse: FSPerson;\r\n        let i = 0;\r\n        people.forEach((subject: FSPerson) => {\r\n            data = FSXdAbovilleParser.getData(subject.display.descendancyNumber); // Get the d'Aboville parsing\r\n            if(data.generation === generations){\r\n                leaves.push(subject.id);\r\n            }\r\n\r\n            parentAId = descMap[data.parentA];\r\n            parentBId = descMap[data.parentB];\r\n            spouseId = descMap[data.spouse];\r\n\r\n            if(!!parentAId){ // If the first parent exists, add this person as a child\r\n                parentA = this.cache[parentAId];\r\n                this.addChild(parentA, parentBId, subject.id);\r\n            }\r\n            if(!!parentBId){ // If the second parent exists, add this person as a child\r\n                parentB = this.cache[parentBId];\r\n                this.addChild(parentB, parentAId, subject.id);\r\n            }\r\n            if(!!parentAId || !!parentBId){ // If either parent exists, add them\r\n                this.addParents(subject, parentAId, parentBId);\r\n            }\r\n            if(!!spouseId){ // If the spouse exists, add them as a spouse.\r\n                spouse = this.cache[spouseId];\r\n                this.addSpouse(subject, spouseId);\r\n            }\r\n        });\r\n\r\n        return {\r\n            allPeople: people,\r\n            leafIds: leaves\r\n        };\r\n    }\r\n\r\n}\r\n\r\nclass FSXAncestryBuilder extends FSXPedigreeBuilder{\r\n    public static readonly MAX_GENERATIONS_PER_CALL = 8;\r\n    public static readonly MAX_GENERATIONS_RECOMMENDED = 16;\r\n\r\n    public getMaxGenerations(): number{\r\n        return FSXAncestryBuilder.MAX_GENERATIONS_PER_CALL;\r\n    }\r\n\r\n    public getMaxRecommendedGenerations(): number{\r\n        return FSXAncestryBuilder.MAX_GENERATIONS_RECOMMENDED;\r\n    }\r\n\r\n    protected runGenerations(pid: PID, generations: number):Promise<{allPeople: FSPerson[], leafIds: PID[]}>{\r\n        return new Promise((resolve: Function, reject: Function) => {\r\n            this.fsx.getPersonWithAncestry(this.pid, (error: any, response: FSResponse) => {\r\n                if(error){\r\n                    reject(error);\r\n                    return;\r\n                }\r\n                if(!!response.data){ // Check for JSON data.\r\n                    resolve(this.connectAncestryData(response.data.persons, generations));\r\n                    return;\r\n                }\r\n                resolve();\r\n            }, generations, \"\", true, false, true);\r\n        });\r\n    }\r\n\r\n    private connectAncestryData(people: FSPerson[], generations: number){\r\n        let leaves: PID[] = [];\r\n        let ahnenMap: {[k: string]: PID} = {};\r\n\r\n        // Cache, fill out the relationship areas, and store the descendancyNumber;\r\n        people.forEach((subject: FSPerson) => {\r\n            if(!this.cache[subject.id]){\r\n                this.cache[subject.id] = subject;\r\n            }\r\n            this.addRelationshipArrays(subject);\r\n            ahnenMap[subject.display.ascendancyNumber] = subject.id;\r\n        });\r\n\r\n        let ahnen: string,\r\n            ahnenNumber: number,\r\n            parentAAhnen: string,\r\n            parentBAhnen: string,\r\n            spouseAhnen: string,\r\n            parentAId: PID,\r\n            parentBId: PID,\r\n            spouseId: PID,\r\n            parentA: FSPerson,\r\n            parentB: FSPerson,\r\n            spouse: FSPerson;\r\n        let i = 0;\r\n\r\n        people.forEach((subject: FSPerson) => {\r\n            ahnen = subject.display.ascendancyNumber;\r\n            if(FSXdAbovilleParser.isSpouse(ahnen)){\r\n                let spouseAhnen = FSXdAbovilleParser.toggleSpouse(ahnen);\r\n                this.addSpouse(subject, spouseAhnen);\r\n                this.addSpouse(this.cache[ahnenMap[spouseAhnen]], ahnen);\r\n                return;\r\n            }\r\n\r\n            ahnenNumber = parseInt(ahnen);\r\n            parentAId = ahnenMap[ahnenNumber * 2];\r\n            parentBId = ahnenMap[ahnenNumber * 2 + 1];\r\n            spouseId = ahnenMap[FSXdAbovilleParser.toggleSpouse(ahnen)];\r\n\r\n            if(!!parentAId){ // If the first parent exists, add this person as a child\r\n                parentA = this.cache[parentAId];\r\n                this.addChild(parentA, parentBId, subject.id);\r\n            }\r\n            if(!!parentBId){ // If the second parent exists, add this person as a child\r\n                parentB = this.cache[parentBId];\r\n                this.addChild(parentB, parentAId, subject.id);\r\n            }\r\n            if(!!parentAId || !!parentBId){ // If either parent exists, add them\r\n                this.addParents(subject, parentAId, parentBId);\r\n            }\r\n            else if(ahnenNumber >= (i = Math.pow(2, generations)) && ahnenNumber < 2 * i){\r\n                leaves.push(subject.id);\r\n            }\r\n            if(!!spouseId){ // If the spouse exists, add them as a spouse.\r\n                spouse = this.cache[spouseId];\r\n                this.addSpouse(subject, spouseId);\r\n            }\r\n        });\r\n\r\n        return {\r\n            allPeople: people,\r\n            leafIds: leaves\r\n        };\r\n    }\r\n}\r\n\r\n\r\n// #endregion","/*\\\r\n|*|\r\n|*|  :: cookies.js ::\r\n|*|\r\n|*|  A complete cookies reader/writer framework with full unicode support.\r\n|*|\r\n|*|  Revision #3 - July 13th, 2017\r\n|*|\r\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\r\n|*|  https://developer.mozilla.org/User:fusionchess\r\n|*|  https://github.com/madmurphy/cookies.js\r\n|*|\r\n|*|  This framework is released under the GNU Public License, version 3 or later.\r\n|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\r\n|*|\r\n|*|  Syntaxes:\r\n|*|\r\n|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\r\n|*|  * docCookies.getItem(name)\r\n|*|  * docCookies.removeItem(name[, path[, domain]])\r\n|*|  * docCookies.hasItem(name)\r\n|*|  * docCookies.keys()\r\n|*|\r\n\\*/\r\n\r\nexport var docCookies = {\r\n    getItem: function (sKey) {\r\n      if (!sKey) { return null; }\r\n      return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\r\n    },\r\n    setItem: function (sKey, sValue, vEnd?, sPath?, sDomain?, bSecure?) {\r\n      if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\r\n      var sExpires = \"\";\r\n      if (vEnd) {\r\n        switch (vEnd.constructor) {\r\n          case Number:\r\n            sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\r\n            /*\r\n            Note: Despite officially defined in RFC 6265, the use of `max-age` is not compatible with any\r\n            version of Internet Explorer, Edge and some mobile browsers. Therefore passing a number to\r\n            the end parameter might not work as expected. A possible solution might be to convert the the\r\n            relative time to an absolute time. For instance, replacing the previous line with:\r\n            */\r\n            /*\r\n            sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; expires=\" + (new Date(vEnd * 1e3 + Date.now())).toUTCString();\r\n            */\r\n            break;\r\n          case String:\r\n            sExpires = \"; expires=\" + vEnd;\r\n            break;\r\n          case Date:\r\n            sExpires = \"; expires=\" + vEnd.toUTCString();\r\n            break;\r\n        }\r\n      }\r\n      let cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\r\n      document.cookie = cookie;\r\n      return true;\r\n    },\r\n    removeItem: function (sKey, sPath?, sDomain?) {\r\n      if (!this.hasItem(sKey)) { return false; }\r\n      document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\r\n      return true;\r\n    },\r\n    hasItem: function (sKey) {\r\n      if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\r\n      return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\r\n    },\r\n    keys: function () {\r\n      var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\r\n      for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\r\n      return aKeys;\r\n    }\r\n  };","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { LinksService } from '../services/links/links.service';\r\n\r\ndeclare type section = {\r\n  title: string,\r\n  links: {\r\n    href: string,\r\n    name: string\r\n  }[]\r\n}\r\n\r\n/**\r\n * Footer page for displaying links to the other fhtl websites.\r\n */\r\n\r\n@Component({\r\n  selector: 'app-footer',\r\n  templateUrl: './footer.component.html',\r\n  styleUrls: ['./footer.component.css']\r\n})\r\nexport class FooterComponent implements OnInit {\r\n\r\n  public footer: section[];\r\n\r\n  constructor(private links: LinksService) {\r\n    this.footer = [\r\n      {\r\n        title: 'Support Fhtl',\r\n        links: [\r\n          {\r\n            href: links.FHTL.home,\r\n            name: 'Home'\r\n          },\r\n          {\r\n            href: links.FHTL.contact, \r\n            name: 'Contact'\r\n          },\r\n          {\r\n            href: links.FHTL.people, \r\n            name: 'People'\r\n          },\r\n          {\r\n            href: links.FHTL.donate,\r\n            name: 'Donate'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        title: 'Research',\r\n        links: [\r\n          {\r\n            href: links.FHTL.relativeFinder,\r\n            name: 'Relative Finder'\r\n          },\r\n          {\r\n            href: links.FHTL.virtualPedigreee, \r\n            name: 'Virtual Pedigree'\r\n          },\r\n          {\r\n            href: links.FHTL.descendancyExplorer,\r\n            name: 'Descendancy Explorer'\r\n          },\r\n          {\r\n            href: links.FHTL.treeSweeper, \r\n            name: 'Tree Sweeper'\r\n          } //TODO add brownie in the future\r\n        ]\r\n      },\r\n      {\r\n        title: 'Visualize',\r\n        links: [\r\n          {\r\n            href: links.FHTL.pedigreePie,\r\n            name: 'Pedigree Pie'\r\n          },\r\n          {\r\n            href: links.FHTL.onePageGenealogy, \r\n            name: 'One Page Genealogy'\r\n          },\r\n          {\r\n            href: links.FHTL.familyCalendar,\r\n            name: 'Family Calendar'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        title: 'Play',\r\n        links: [\r\n          {\r\n            href: links.FHTL.geneopardy,\r\n            name: 'Geneopardy'\r\n          },\r\n          {\r\n            href: links.FHTL.wheelOfFamilyFortune, \r\n            name: 'Wheel of Family Fortune'\r\n          },\r\n          {\r\n            href: links.FHTL.ancestorGames,\r\n            name: 'Ancestor Games'\r\n          },\r\n          {\r\n            href: links.FHTL.recordQuest, \r\n            name: 'Record Quest'\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<!--<mat-grid-list cols=\"{{footer.length}}\">\r\n  \r\n  <mat-grid-tile class=\"links\" *ngFor=\"let section of footer\">\r\n    \r\n    <h1>{{section.title}}</h1>\r\n\r\n    <mat-list>\r\n      <mat-list-item *ngFor=\"let link of section.links\">\r\n        <a href=\"{{link.href}}\" class=\"fhtl-link\">{{link.name}}</a>  \r\n      </mat-list-item>\r\n    </mat-list>\r\n  \r\n  </mat-grid-tile>\r\n  \r\n</mat-grid-list>\r\n-->\r\n\r\n<div class=\"section-holder\">\r\n\r\n  <div class=\"column\" *ngFor=\"let section of footer\">\r\n    <h1 class=\"section-title\">{{section.title}}</h1>\r\n\r\n    <mat-list dense>\r\n      <mat-list-item class=\"link-item\" *ngFor=\"let link of section.links\">\r\n        <a href=\"{{link.href}}\" target=\"_blank\" class=\"fhtl-link\">{{link.name}}</a>  \r\n      </mat-list-item>\r\n    </mat-list>\r\n  </div>\r\n\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-instructions',\r\n  templateUrl: './instructions.component.html',\r\n  styleUrls: ['./instructions.component.css']\r\n})\r\nexport class InstructionsComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  // openHelpVideo(): void {\r\n  //   console.log(\"todo: open video\");\r\n  // }\r\n\r\n}\r\n","\r\n<!-- <div class = 'help-video'>\r\n    <iframe width=\"560\" height=\"315\" src=\"https://youtu.be/xtmXtmdxjNk\" title=\"YouTube video player\" \r\n    frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\r\n</div> -->\r\n\r\n<h2 mat-title>Map App Instructions</h2>\r\n\r\n<mat-dialog-content>\r\n\r\nThe Map App is a way of accessing customized family history hints \r\nbased on a person's surname or the county they lived in.\r\n<ol>\r\n    <li>Using the options button, choose what kind of task hint you want to generate. \r\n        By default this application returns record attachment hints that can be \r\n        broken down into three difficulty categories.</li>\r\n\r\n    <li>Start by typing a surname or county a person lived in and pressing \r\n        the search button. The application will load up to 200 results for your search.</li>\r\n\r\n    <li>Click on one of the marker pins you want to work on. Click the blue text with \r\n        the surname and place and it will take you directly to the FamilySearch sourcelinker \r\n        on your browser. The first time you do this, you will need to log in to FamilySearch.</li>\r\n\r\n    <li>Once you are in sourcelinker, compare the record information (which is on the left \r\n        of the screen) with the information about the person on the Family Tree (which is on \r\n        the right of the screen) and decide if the record should be attached. If you think \r\n        it is a match, click compare, then add to move the residence information over \r\n        to the tree, and then attach.</li>\r\n    <!-- Todo: add button that will automatically pull up familysearch? -->\r\n    <!-- Todo: add link to learn more about record linking in familysearch in general here? -->\r\n</ol>\r\nFor detailed instructions, click <a href = \"https://docs.google.com/document/d/1MMoN7U5eNtrz3Yv3hnWjeRGs5ijwztg19QjNG_bQ4d8/edit\" target=\"_blank\" rel=\"noreferrer noopener\">here</a>\r\nand a help video can be found <a href = \"https://youtu.be/xtmXtmdxjNk\" target=\"_blank\" rel=\"noreferrer noopener\">here.</a>\r\n    <!--Instead: a new link on the page? -->\r\n\r\n\r\n</mat-dialog-content>\r\n<mat-dialog-actions>\r\n\r\n<!-- <button mat-button (click)='openHelpVideo()'>Open Help Video</button>     -->\r\n<button mat-button mat-dialog-close>Done</button>\r\n\r\n</mat-dialog-actions>\r\n","import { Component, AfterViewInit } from \"@angular/core\";\r\nimport { BackendService } from \"../services/backend.service\";\r\nimport * as L from \"leaflet\";\r\nimport { HttpResponse } from \"@angular/common/http\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { PopupWarningComponent } from \"../popup-warning/popup-warning.component\";\r\n/*\r\ninterface search {\r\n  projectName: string,\r\n  name: string,\r\n  loc: string,\r\n  option: any,\r\n  difficulty: any\r\n}\r\n*/\r\n@Component({\r\n  selector: \"app-map\",\r\n  templateUrl: \"./map.component.html\",\r\n  styleUrls: [\"./map.component.css\"],\r\n})\r\n\r\n/**\r\n * MapComponent\r\n * @param showSearch determines if search component is shown\r\n * @param map map configuration\r\n * @param defaultIcon attributes common to each icon\r\n * @param easyIcon sets icon color for easy record attachments\r\n * @param mediumIcon sets icon color for medium record attachments\r\n * @param hardIcon sets icon color for hard record attachments\r\n * @param icons markers for the map\r\n * @param startingCoords default latitude and longitude position\r\n * @param startingZoom default zoom\r\n * @param searchType the type of record\r\n */\r\nexport class MapComponent implements AfterViewInit {\r\n  public showSearch: boolean = false;\r\n  public showPopup: boolean = false;\r\n  public tabError: boolean = false;\r\n  private numTabs: number = 5;\r\n  private map: any = null;\r\n  private defaultIcon: any = null;\r\n  private easyIcon: any = null;\r\n  private mediumIcon: any = null;\r\n  private hardIcon: any = null;\r\n  private icons: any = new L.layerGroup();\r\n  private startingCoords: Array<number> = [40, -100];\r\n  private startingZoom: number = 5; //The higher the number the more zoomed in\r\n  private searchZoom: number = 3;\r\n  private searchType: any = \"Record Attachment\";\r\n  //private searchEmitter: Object = null;\r\n  //private searchEmitter: search;\r\n  private searchEmitter: any;\r\n  private preserveScroll: boolean = false;\r\n  private currentData: Array<Object> = null;\r\n  private hintCount: number = 0;\r\n  private projectShown: boolean = false;\r\n\r\n\r\n  constructor(\r\n    private backendService: BackendService,\r\n    private blankSearchMessage: MatSnackBar,\r\n    public popupWarning: MatDialog\r\n  ) {}\r\n\r\n  ngAfterViewInit(): void {\r\n    this.initMap();\r\n    this.configureIcon();\r\n    this.addPins();\r\n  }\r\n\r\n  /**\r\n   * Generates the Map\r\n   * */\r\n  private initMap(): void {\r\n    this.map = L.map(\"map\", {\r\n      center: this.startingCoords,\r\n      zoom: this.startingZoom,\r\n      zoomControl: false,\r\n      tap: false,\r\n    });\r\n    const tiles = L.tileLayer(\r\n      \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n      {\r\n        maxZoom: 18,\r\n        minZoom: 3,\r\n        attribution:\r\n          '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>',\r\n      }\r\n    );\r\n\r\n    tiles.addTo(this.map);\r\n\r\n    //So the user cannot scroll off of the map\r\n    //Numbers derived from Leaflet website\r\n    this.map.setMaxBounds([\r\n      [256, 256],\r\n      [-256, -256],\r\n    ]);\r\n\r\n    //Set zoom in, zoom out buttons to be in the top right, hides zoom buttons in mobile\r\n    if (!L.Browser.mobile) {\r\n      L.control\r\n        .zoom({\r\n          position: \"topright\",\r\n        })\r\n        .addTo(this.map);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets attributes for the icon to be\r\n   * displayed when showing records\r\n   * */\r\n  private configureIcon(): void {\r\n    this.defaultIcon = L.icon({\r\n      iconUrl: \"../assets/icons/mapIcon.png\",\r\n      iconSize: [45, 45],\r\n      iconAnchor: [22.5, 45],\r\n      popupAnchor: [0, -40],\r\n    });\r\n    this.easyIcon = L.icon({\r\n      iconUrl: \"../assets/icons/greenIcon.png\",\r\n      iconSize: [45, 45],\r\n      iconAnchor: [22.5, 45],\r\n      popupAnchor: [0, -40],\r\n    });\r\n    this.mediumIcon = L.icon({\r\n      iconUrl: \"../assets/icons/blueIcon.png\",\r\n      iconSize: [45, 45],\r\n      iconAnchor: [22.5, 45],\r\n      popupAnchor: [0, -40],\r\n    });\r\n    this.hardIcon = L.icon({\r\n      iconUrl: \"../assets/icons/purpleIcon.png\",\r\n      iconSize: [45, 45],\r\n      iconAnchor: [22.5, 45],\r\n      popupAnchor: [0, -40],\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n    *Adds pins for each of the connected websites\r\n  **/\r\n\r\n  private addPins(): void{\r\n    let data:{url: string, latitude: number, longitude: number, state: string, county: string}[] = [\r\n      {\"url\":\"http://connectedtempe.surge.sh/\", \"latitude\":33.41, \"longitude\":-111.94,\"state\":\"Arizona\",\"county\":\"Early Tempe\"},\r\n      {\"url\":\"http://connectedus.surge.sh/\", \"latitude\":38.89, \"longitude\":-77.03,\"state\":\"Famous People\",\"county\":\"USA\"},\r\n      {\"url\":\"http://connectedherriman.surge.sh/\", \"latitude\":40.51, \"longitude\":-112.03,\"state\":\"Utah\",\"county\":\"Herriman\"},\r\n      {\"url\":\"http://connectedcody.surge.sh/\", \"latitude\":44.52, \"longitude\":-109.05,\"state\":\"Wyoming\",\"county\":\"Cody\"},\r\n      {\"url\":\"http://connectedmesa.surge.sh/\", \"latitude\":33.41, \"longitude\":-111.83,\"state\":\"Arizona\",\"county\":\"Mesa\"}\r\n\r\n    ];\r\n    let results = data;\r\n    this.currentData = results;\r\n\r\n\r\n    for (let i = 0; i < results.length; i++) {\r\n\r\n      var marker = L.marker([results[i].latitude, results[i].longitude], {\r\n        icon: this.defaultIcon,\r\n      });\r\n\r\n      //Prevents popups from displaying null as locations\r\n      if (results[i].state == null) {\r\n        results[i].state = \"\";\r\n      }\r\n      if (results[i].county == null) {\r\n        results[i].state = \"\";\r\n      }\r\n      var popupContent = `<b>\r\n      <a class=\"popup-click\" href=\"${results[i].url}\" target='_blank' rel='noreferrer noopener'>\r\n      </br>${results[i].url}\r\n      </a>\r\n      </br>${results[i].county}, ${results[i].state}\r\n      </b>`;\r\n\r\n      marker.bindPopup(popupContent);\r\n      this.icons.addLayer(marker);\r\n    }\r\n\r\n    this.icons.addTo(this.map);\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Called whenever the page is clicked. Only used to identify when a popup is clicked to perform a backend call.\r\n   *\r\n   */\r\n\r\n\r\n  pageClicked(event) {\r\n    let classes = event?.target?.classList;\r\n    if (classes == null || !classes.contains(\"popup-click\")) return;\r\n\r\n    let url = event.target.href;\r\n    let hint = event.target.childNodes[1].innerText;\r\n    //this.backendService.updateUrl(url, hint);\r\n  }\r\n\r\n}\r\n","<div class=\"map-container\">\r\n  <div id=\"map\" (click)=\"pageClicked($event)\"></div>\r\n</div>\r\n\r\n\r\n<!--\r\n<div *ngIf=\"showSearch\">\r\n  <app-search (searchToMap)=\"startSearch($event)\" (searchProjects)=\"startProjects($event)\"></app-search>\r\n</div>\r\n-->\r\n\r\n\r\n<!-- <div *ngIf=\"showSearch\">\r\n  <app-search (searchProjects)=\"startProjects($event)\"></app-search>\r\n</div> -->\r\n\r\n<!--\r\n<div *ngIf=\"!showSearch\">\r\n  <button id=\"justify\" class=\"search-button\" mat-fab (click)=\"makeAnotherSearch()\">\r\n    <img class=\"search-icon\" id=\"joseph-smith\" src=\"../assets/icons/searchIcon.png\" />\r\n    <p id=\"search-text\" class=\"button-text\">Search</p>\r\n  </button>\r\n  <button class=\"search-button\" id=\"justify\" mat-fab (click)=\"refresh()\">\r\n    <mat-icon class=\"refresh-icon\" id=\"joseph-smith\">refresh</mat-icon>\r\n    <p id=\"reset-text\">Reset</p>\r\n  </button>\r\n</div>\r\n<div *ngIf=\"!showSearch\" class=\"count-label\">\r\n  <p>Hints Left: {{ this.hintCount ? this.hintCount : \"Error\" }}</p>\r\n</div>\r\n<div\r\n  *ngIf=\"!showSearch\"\r\n  style=\"right: 0; bottom: 0; display: inline; position: absolute\"\r\n>\r\n  <mat-form-field\r\n    id=\"tab-field\"\r\n    style=\"display: inline-block\"\r\n    appearance=\"fill\"\r\n    color=\"primary\"\r\n    onchange=\"() => this.tabError = false;\"\r\n  >\r\n    <mat-label>Num Tabs</mat-label>\r\n    <input\r\n      class=\"tab-input\"\r\n      matInput\r\n      type=\"number\"\r\n      value=\"5\"\r\n      min=\"1\"\r\n      max=\"25\"\r\n      [(ngModel)]=\"numTabs\"\r\n    />\r\n    <mat-error *ngIf=\"tabError\">Please enter a value less than 25</mat-error>\r\n  </mat-form-field>\r\n  <button\r\n    class=\"tab-button\"\r\n    mat-raised-button\r\n    color=\"primary\"\r\n    (click)=\"openTabs()\"\r\n  >\r\n    Open Tabs\r\n  </button>\r\n</div> -->\r\n\r\n<!-- <script>\r\n\r\n  function show() {\r\n    let button = document.getElementById(\"justify\")\r\n    let tmpImg = document.getElementById(\"joseph-smith\")\r\n    tmpImg.style.visibility = \"hidden\";\r\n    document.getElementById(\"search-text\").style.visibility = \"visible\"\r\n  }\r\n\r\n  function hide() {\r\n    let tmpImg = document.getElementById(\"joseph-smith\")\r\n    tmpImg.style.visibility = \"visible\";\r\n    document.getElementById(\"search-text\").style.visibility = \"hidden\"\r\n  }\r\n</script> -->\r\n","import { NgModule } from \"@angular/core\";\r\nimport { MatButtonModule } from \"@angular/material/button\";\r\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\r\nimport { MatInputModule } from \"@angular/material/input\";\r\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\r\nimport { MatCardModule } from \"@angular/material/card\";\r\nimport { MatIconModule } from \"@angular/material/icon\";\r\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\r\nimport { MatMenuModule } from \"@angular/material/menu\";\r\nimport { MatDialogModule } from \"@angular/material/dialog\";\r\nimport { MatGridListModule } from \"@angular/material/grid-list\";\r\nimport { MatListModule } from \"@angular/material/list\";\r\nimport { MatSnackBarModule } from \"@angular/material/snack-bar\";\r\nimport { MatExpansionModule } from \"@angular/material/expansion\";\r\nimport { MatTreeModule } from \"@angular/material/tree\";\r\nimport { MatAutocompleteModule } from \"@angular/material/autocomplete\";\r\nimport { MatChipsModule } from \"@angular/material/chips\";\r\n\r\n@NgModule({\r\n  imports: [\r\n    MatButtonModule,\r\n    MatToolbarModule,\r\n    MatInputModule,\r\n    MatProgressSpinnerModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatSidenavModule,\r\n    MatMenuModule,\r\n    MatDialogModule,\r\n    MatGridListModule,\r\n    MatListModule,\r\n    MatSnackBarModule,\r\n    MatExpansionModule,\r\n    MatTreeModule,\r\n    MatAutocompleteModule,\r\n    MatChipsModule,\r\n  ],\r\n  exports: [\r\n    MatButtonModule,\r\n    MatToolbarModule,\r\n    MatInputModule,\r\n    MatProgressSpinnerModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatSidenavModule,\r\n    MatMenuModule,\r\n    MatDialogModule,\r\n    MatGridListModule,\r\n    MatListModule,\r\n    MatSnackBarModule,\r\n    MatExpansionModule,\r\n    MatTreeModule,\r\n    MatAutocompleteModule,\r\n    MatChipsModule,\r\n  ],\r\n})\r\nexport class MaterialModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-popup-warning',\r\n  templateUrl: './popup-warning.component.html',\r\n  styleUrls: ['./popup-warning.component.css']\r\n})\r\nexport class PopupWarningComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<h2 mat-title>Pop-ups Blocked!</h2>\r\n\r\n<mat-dialog-content>\r\n  <div>\r\n    <p>\r\n      Please adjust your browser settings to allow pop-ups in order to use this\r\n      feature. If you need help enabling pop-ups, please see the help references\r\n      for your specific browser below:\r\n    </p>\r\n    <mat-chip-list class=\"center\">\r\n      <mat-chip style=\"display: inline\">\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://support.google.com/chrome/answer/95472?hl=en&co=GENIE.Platform%3DDesktop\"\r\n          >Chrome (recommended browser)</a\r\n        >\r\n      </mat-chip>\r\n      <mat-chip style=\"display: inline\">\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://support.mozilla.org/en-US/kb/pop-blocker-settings-exceptions-troubleshooting\"\r\n          >Firefox</a\r\n        >\r\n      </mat-chip>\r\n      <mat-chip style=\"display: inline\">\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://support.apple.com/guide/safari/block-pop-ups-sfri40696/mac\"\r\n          >Safari</a\r\n        >\r\n      </mat-chip>\r\n      <mat-chip style=\"display: inline\">\r\n        <a\r\n          target=\"_blank\"\r\n          href=\"https://support.microsoft.com/en-us/Search/results?query=enable+popups\"\r\n          >Edge</a\r\n        >\r\n      </mat-chip>\r\n    </mat-chip-list>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions>\r\n  <button mat-button mat-dialog-close>Done</button>\r\n</mat-dialog-actions>\r\n","import { Component, OnInit, Output, EventEmitter } from \"@angular/core\";\r\nimport { BackendService } from \"../services/backend.service\";\r\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\r\nimport { MatDialog } from \"@angular/material/dialog\";\r\nimport { InstructionsComponent } from \"../instructions/instructions.component\";\r\nimport { FilterStateService } from \"../services/filter-state.service\";\r\n\r\nimport projectData from \"../search/communityProjects.json\";\r\n//import { tmpdir } from \"os\";\r\ninterface Project {\r\n  id: Number;\r\n  name: String;\r\n  description: String;\r\n  location: String;\r\n}\r\n\r\n@Component({\r\n  selector: \"app-search\",\r\n  templateUrl: \"./search.component.html\",\r\n  styleUrls: [\"./search.component.css\"],\r\n})\r\n\r\n/**SearchComponent\r\n * @param surname the name to search by\r\n * @param location the location to search by\r\n * @param ...\r\n * @param suggestTimer used to only give suggestions when the user stops typing\r\n * @param waitInterval the amount of time to wait between typing and giving suggestions\r\n * */\r\nexport class SearchComponent implements OnInit {\r\n  public surname: string = \"\";\r\n  public location: string = \"\";\r\n  public option: string[] = [\"Record Attachment\"];\r\n  public difficulty: string[] = [\"Easy\", \"Medium\"];\r\n  //public difficulty: string[] = [\"Easier\", \"Normal\"];\r\n  public menuList: any;\r\n  public difficultyList: any;\r\n  public autocomplete: Array<string> = [];\r\n  private suggestTimer: any;\r\n  private waitInterval: number = 150; //modify this number to change the speed of autocomplete\r\n\r\n  public panelOpenState: boolean = false;\r\n\r\n  public projectName: string = \"\";\r\n  projects:Project[] = projectData;\r\n\r\n\r\n\r\n  constructor(\r\n    private backendService: BackendService,\r\n    private filterService: FilterStateService,\r\n    private emptySearchMessage: MatSnackBar,\r\n    public instructions: MatDialog\r\n  ) {\r\n    // this.menuList = [\r\n    //   \"Record Attachment\",\r\n    //   \"Possible Duplicates\",\r\n    //   \"Connect Families\",\r\n    //   \"Find Death Dates\",\r\n    // ];\r\n    this.menuList = [\"Record Attachment\"];\r\n    this.difficultyList = [\"Easy\", \"Medium\", \"Hard\"];\r\n    //this.difficultyList = [\"Easier\", \"Normal\", \"Harder\"];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.difficulty = this.filterService.getDiff();\r\n    this.option = [this.filterService.getType()];\r\n  }\r\n\r\n\r\n  public updateDiff() {\r\n    console.log(\"Change Diff\");\r\n    this.filterService.changeDiff(this.difficulty);\r\n  }\r\n\r\n  public updateType() {\r\n    console.log(\"Change Type\");\r\n    this.filterService.changeType(this.option[0]);\r\n  }\r\n\r\n\r\n  /**\r\n   * Opens the Instructions Component as Mat-Dialog\r\n   * */\r\n  public displayInstructions(): void {\r\n    this.instructions.open(InstructionsComponent, {\r\n      panelClass: \"helpDialog\",\r\n      autoFocus: false, //prevents scrolling to the bottom upon opening\r\n    });\r\n  }\r\n\r\n  public getSuggestionsName(): void {\r\n\r\n    //reset timer\r\n    clearTimeout(this.suggestTimer);\r\n\r\n    if (this.surname === \"\") {\r\n      this.autocomplete = [];\r\n      return;\r\n    }\r\n\r\n    this.suggestTimer = setTimeout(async () => {\r\n      let suggestions = await this.backendService.getSuggestName(\r\n        this.surname,\r\n        \"\",\r\n        this.difficulty,\r\n        this.option[0]\r\n      );\r\n\r\n      let temp = [];\r\n\r\n      for (let i = 0; i < suggestions.body.length; i++) {\r\n        if (i >= 10) {\r\n          break;\r\n        }\r\n        let record = suggestions.body[i];\r\n        temp.push(record.surname);\r\n      }\r\n\r\n      this.autocomplete = temp;\r\n    }, this.waitInterval);\r\n  }\r\n\r\n  public getSuggestionsLocation(): void {\r\n    //reset timer\r\n    clearTimeout(this.suggestTimer);\r\n\r\n    if (this.location === \"\") {\r\n      this.autocomplete = [];\r\n      return;\r\n    }\r\n\r\n    this.suggestTimer = setTimeout(async () => {\r\n      let suggestions = await this.backendService.getSuggestLoc(\r\n        \"\",\r\n        this.location,\r\n        this.difficulty,\r\n        this.option[0]\r\n      );\r\n\r\n      let temp = [];\r\n\r\n      /*\r\n      for (let i = 0; i < suggestions.body.length; i++) {\r\n        if (i >= 10) {\r\n          break;\r\n        }\r\n        let record = suggestions.body[i];\r\n        if (record.state == null && record.county == null) {\r\n          continue;\r\n        } else if (record.state == null) {\r\n          temp.push(record.county);\r\n        } else if (record.county == null) {\r\n          temp.push(record.state);\r\n        } else {\r\n          temp.push(record.county + \", \" + record.state);\r\n        }\r\n      }\r\n      */\r\n\r\n      //New way, might have some bugs but works for now\r\n      for (let i = 0; i < suggestions.body.length; ++i) {\r\n        temp.push(suggestions.body[i]);\r\n      }\r\n\r\n      this.autocomplete = temp;\r\n    }, this.waitInterval);\r\n\r\n\r\n  }\r\n\r\n  public clearSuggestions(): void {\r\n    this.autocomplete = [];\r\n  }\r\n\r\n  public showProjects(): void {\r\n    //console.log(\"SHOW PROJECTS\");\r\n    document.getElementById(\"project-tab\").style.backgroundColor = \"#f5f5f5\";\r\n    document.getElementById(\"search-tab\").style.backgroundColor = \"#d8d8d8\";\r\n    document.getElementById(\"search-display\").style.display = \"none\";\r\n    document.getElementById(\"project-display\").style.display = \"block\";\r\n  }\r\n\r\n  public showSearch(): void {\r\n    //console.log(\"SHOW SEARCH\");\r\n    document.getElementById(\"search-tab\").style.backgroundColor = \"#f5f5f5\";\r\n    document.getElementById(\"project-tab\").style.backgroundColor = \"#d8d8d8\";\r\n    document.getElementById(\"project-display\").style.display = \"none\";\r\n    document.getElementById(\"search-display\").style.display = \"block\";\r\n  }\r\n\r\n  @Output() searchToMap = new EventEmitter<Object>();\r\n\r\n  public async populateMap(): Promise<void> {\r\n    if (this.surname === \"\" && this.location === \"\") {\r\n      this.emptySearchMessage.open(\r\n        \"Please Enter a Name or Location\",\r\n        \"Dismiss\",\r\n        { duration: 3000, panelClass: [\"warning-snackbar\"] }\r\n      );\r\n      return;\r\n    }\r\n    this.emptySearchMessage.dismiss();\r\n    this.searchToMap.emit({\r\n      name: this.surname,\r\n      loc: this.location,\r\n      option: this.option[0],\r\n      difficulty: this.difficulty,\r\n    });\r\n  }\r\n\r\n  @Output() searchProjects = new EventEmitter<Object>();\r\n\r\n  public async projectClicked(name: string = \"\"): Promise<void> {\r\n    console.log(\"a project was clicked, emitting\");\r\n\r\n    this.projectName = name;\r\n\r\n    this.searchProjects.emit({\r\n      projectName: this.projectName,\r\n      name: this.surname,\r\n      loc: this.location,\r\n      option: this.option[0],\r\n      difficulty: this.difficulty,\r\n    });\r\n  }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n","<div id=\"flex-container\">\r\n  <div class=\"main-container\">\r\n    <h3 class=\"title-container\">Customized Family History Hints</h3>\r\n\r\n    <div class=\"body-content\" id=\"search-display\">\r\n      <h3><strong>Welcome to the Map App!</strong></h3>\r\n\r\n      Generate customized record hints based on a person's surname or the county\r\n      they lived in. Filter by difficulty or type of hints using the options\r\n      button\r\n      <br />\r\n\r\n      <button mat-button (click)=\"displayInstructions()\">\r\n        Detailed Instructions\r\n      </button>\r\n\r\n      <mat-expansion-panel\r\n        class=\"options-panel, mat-elevation-z0\"\r\n        (opened)=\"panelOpenState = true\"\r\n        (closed)=\"panelOpenState = false\"\r\n        hideToggle\r\n      >\r\n        <mat-expansion-panel-header>\r\n          <mat-icon class=\"arrow-icon\" *ngIf=\"panelOpenState\"\r\n            >keyboard_arrow_up</mat-icon\r\n          >\r\n          <mat-panel-title class=\"panel-title\"> Options </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <mat-selection-list\r\n          #options\r\n          [multiple]=\"false\"\r\n          [(ngModel)]=\"option\"\r\n          (selectionChange)=\"updateType()\"\r\n        >\r\n          <mat-list-option *ngFor=\"let option of menuList\" [value]=\"option\">\r\n            {{ option }}\r\n          </mat-list-option>\r\n        </mat-selection-list>\r\n        <div\r\n          *ngIf=\"\r\n            options.selectedOptions.selected[0]?.value === 'Record Attachment'\r\n          \"\r\n          class=\"difficulty\"\r\n        >\r\n          <mat-selection-list\r\n            #diff\r\n            [(ngModel)]=\"difficulty\"\r\n            (selectionChange)=\"updateDiff()\"\r\n          >\r\n            <mat-list-option *ngFor=\"let diffi of difficultyList\" [value]=\"diffi\">\r\n              {{ diffi }}\r\n            </mat-list-option>\r\n          </mat-selection-list>\r\n        </div>\r\n      </mat-expansion-panel>\r\n      <br />\r\n\r\n      <div class=\"inputs\">\r\n        <!-- Surname -->\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Surname</mat-label>\r\n          <!--autocomple = \"off\" disables automatic browser autocomplete-->\r\n          <input\r\n            (keyup)=\"getSuggestionsName()\"\r\n            (keydown.enter)=\"populateMap()\"\r\n            (focus)=\"clearSuggestions()\"\r\n            [(ngModel)]=\"surname\"\r\n            matInput\r\n            placeholder=\"Price\"\r\n            [matAutocomplete]=\"auto\"\r\n          />\r\n\r\n          <mat-autocomplete #auto=\"matAutocomplete\">\r\n            <mat-option *ngFor=\"let option of autocomplete\" [value]=\"option\">\r\n              {{ option }}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n        </mat-form-field>\r\n\r\n        <!-- Location -->\r\n        <mat-form-field appearance=\"outline\">\r\n          <mat-label>Location</mat-label>\r\n          <input\r\n            (keyup)=\"getSuggestionsLocation()\"\r\n            (keydown.enter)=\"populateMap()\"\r\n            (focus)=\"clearSuggestions()\"\r\n            [(ngModel)]=\"location\"\r\n            matInput\r\n            placeholder=\"Denton, Texas\"\r\n            [matAutocomplete]=\"auto\"\r\n          />\r\n\r\n          <mat-autocomplete #auto=\"matAutocomplete\">\r\n            <mat-option *ngFor=\"let option of autocomplete\" [value]=\"option\">\r\n              {{ option }}\r\n            </mat-option>\r\n          </mat-autocomplete>\r\n        </mat-form-field>\r\n\r\n        <button mat-button (click)=\"populateMap()\">Search</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"body-content\" id=\"project-display\">\r\n      <h3><strong>Participate in One of Our Projects!</strong></h3>\r\n      <div class=\"all-project-container\">\r\n        <div class=\"project-container\" *ngFor=\"let proj of projects\" (click)=\"projectClicked(proj.name)\" >\r\n          <p class=\"project-title\">{{ proj.name }}</p>\r\n          <p class=\"project-description\">{{ proj.description }}</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"scroll-cue\">\r\n        <p class=\"scroll-text\">SCROLL</p>\r\n        <img class=\"scroll-img\" src=\"https://s3.us-west-2.amazonaws.com/map-app.familytech.byu.edu/51-519289_down-arrow-png-image-background-black-arrow-down.png\" alt=\"\">\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n\r\n    <div class=\"footer-container\">\r\n      <img src=\"../../assets/images/byuLogo.png\" alt=\"BYU Logo\" />\r\n      <div class=\"labLinks\">\r\n        <a href=\"https://rll.byu.edu\" target=\"_blank\" rel=\"noreferrer noopener\"\r\n          >Record Linking Lab</a\r\n        >\r\n        <a\r\n          href=\"https://familytech.byu.edu\"\r\n          target=\"_blank\"\r\n          rel=\"noreferrer noopener\"\r\n          >Family History Technology Lab</a\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div id=\"tab-container\">\r\n    <div class=\"tab search\" id=\"search-tab\" (click)=\"showSearch()\">\r\n      <p id=\"search-tab-text\">Search</p>\r\n    </div>\r\n    <div class=\"tab project\" id=\"project-tab\" (click)=\"showProjects()\">\r\n      <p id=\"search-tab-text\" >Projects</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n","import { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { filter, lastValueFrom } from \"rxjs\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BackendService {\r\n\r\n  // private apiPath: string =  'https://map-app-backend-prd.byu-dept-fhtl-prd.amazon.byu.edu/api/v2/'\r\n\r\n  private apiPath: string =  'http://localhost:8000/api/v2/'\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  async awaitGetLastValueFrom(url: string, params?: any): Promise<any> {\r\n    // https://www.youtube.com/watch?v=3aeK5SfWBSU\r\n    let wait = 0;\r\n    let result = null;\r\n\r\n    if (!params) params = { observe: 'response' };\r\n    else if (!params.hasOwnProperty('observe')) params.observe = 'response';\r\n    const data$ = this.http.get<any>(url, params);\r\n    do {\r\n      //debugger\r\n      if (wait > 0) await new Promise(resolve => setTimeout(resolve, wait)); //wait between checks\r\n      try {\r\n        const result = await lastValueFrom(data$, { defaultValue: 'Default on null' }) ?? 'Default on undefined'\r\n        return result;\r\n      }\r\n      catch (err: any) {\r\n        console.log(\"GOT AN ERROR\");\r\n        console.log(err);\r\n        if (err.status < 500 && err.status > 0) return err.hasOwnProperty(\"body\") ? err.body : null;\r\n      }\r\n      if (wait < 15000) wait += 1000;\r\n    } while (result == null);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param name The name being searched\r\n   * @param loc The location being searched\r\n   * @param filterType The filter parameters to decide what we are searching (e.g. duplicates, records, etc.)\r\n   *                   Possible values (case sensitive): Possible Duplicates, Connect Families,Find Death Dates ,Record Attachment\r\n   * @param filterDifficulty If the filter is for source linking, pass an array of strings including at least\r\n   *                          one of the following: 'Easy', 'Medium' or 'Hard'.\r\n   */\r\n\r\n  async getSearchName(name: string = \"\", loc: string = \"\", filterType: string, filterDifficulty: string[]): Promise<any> {\r\n    if (name === \"\" && loc === \"\") {\r\n      throw new Error(\"Search must not be empty.\");\r\n    }\r\n\r\n    let params = new HttpParams();\r\n    params = params.append('name', name);\r\n    params = params.append('loc', loc);\r\n    params = params.append(\"filterType\",filterType);\r\n    if (filterType == \"Record Attachment\") {\r\n      for (let i=0;i<filterDifficulty.length;i++){\r\n        params = params.append(\"filterDifficulty\",filterDifficulty[i]);\r\n      }\r\n    }\r\n\r\n    return this.awaitGetLastValueFrom(this.apiPath+'searchname?'+params.toString());\r\n  }\r\n\r\n  async getSearchLoc(name: string = \"\", loc: string = \"\", filterType: string, filterDifficulty: string[]): Promise<any> {\r\n    if (name === \"\" && loc === \"\") {\r\n      throw new Error(\"Search must not be empty.\");\r\n    }\r\n\r\n    let params = new HttpParams();\r\n    params = params.append('name', name);\r\n    params = params.append('loc', loc);\r\n    params = params.append(\"filterType\",filterType);\r\n    if (filterType == \"Record Attachment\") {\r\n      for (let i=0;i<filterDifficulty.length;i++){\r\n        params = params.append(\"filterDifficulty\",filterDifficulty[i]);\r\n      }\r\n    }\r\n\r\n    return this.awaitGetLastValueFrom(this.apiPath+'searchloc?'+params.toString());\r\n  }\r\n\r\n  async getProject(projectName: string = \"\", name: string = \"\", loc: string = \"\", filterType: string, filterDifficulty: string[]): Promise<any> {\r\n\r\n    let params = new HttpParams();\r\n    params = params.append('projectName', projectName);\r\n    params = params.append('name', name)\r\n    params = params.append('loc', loc);\r\n    params = params.append(\"filterType\",filterType);\r\n    if (filterType == \"Record Attachment\") {\r\n      for (let i=0;i<filterDifficulty.length;i++) {\r\n        params = params.append(\"filterDifficulty\",filterDifficulty[i]);\r\n      }\r\n    }\r\n\r\n    console.log(\"Params: \", params)\r\n\r\n    return this.awaitGetLastValueFrom(this.apiPath+'project?'+params.toString());\r\n  }\r\n\r\n  async getSuggestName(name:string = \"\", loc:string = \"\", filterDifficulty: string[], filterType: string): Promise<any> {\r\n\r\n    //debugger\r\n\r\n    if (name===\"\"&&loc===\"\"){\r\n      return null;\r\n    }\r\n    let params = new HttpParams();\r\n    params=params.append('loc',loc);\r\n    params = params.append('name',name);\r\n\r\n    params = params.append(\"filterType\",filterType);\r\n    if(filterType == \"Record Attachment\"){\r\n    for(let i=0;i<filterDifficulty.length;i++){\r\n      params = params.append(\"filterDifficulty\",filterDifficulty[i]);\r\n    }\r\n  }\r\n    return this.awaitGetLastValueFrom(this.apiPath + \"suggestname?\"+params.toString());\r\n  }\r\n\r\n  async getSuggestLoc(name:string = \"\", loc:string = \"\", filterDifficulty: string[], filterType: string): Promise<any> {\r\n\r\n    //debugger\r\n\r\n    if (name===\"\"&&loc===\"\"){\r\n      return null;\r\n    }\r\n    let params = new HttpParams();\r\n    params=params.append('loc',loc);\r\n    params = params.append('name',name);\r\n\r\n    params = params.append(\"filterType\",filterType);\r\n    if(filterType == \"Record Attachment\"){\r\n    for(let i=0;i<filterDifficulty.length;i++){\r\n      params = params.append(\"filterDifficulty\",filterDifficulty[i]);\r\n    }\r\n  }\r\n    return this.awaitGetLastValueFrom(this.apiPath + \"suggestloc?\"+params.toString());\r\n  }\r\n\r\n  updateUrl(url:string = \"\",hintType:string=\"\"): void {\r\n    console.log(\"url: \", url);\r\n    console.log(\"hintType: \", hintType);\r\n    if(url===\"\"){\r\n      throw new Error(\"URL must not be empty.\");\r\n    }\r\n    this.awaitGetLastValueFrom(`${this.apiPath}update?url=${encodeURIComponent(url)}&filterType=${encodeURIComponent(hintType)}`);\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class FilterStateService {\r\n  private hintType: string = \"Record Attachment\";\r\n  //private difficulty: string[] = [\"Easier\", \"Normal\"];\r\n  private difficulty: string[] = [\"Easy\", \"Medium\"];\r\n  constructor() {}\r\n\r\n  changeType(type: string) {\r\n    this.hintType = type;\r\n  }\r\n\r\n  changeDiff(diff: string[]) {\r\n    this.difficulty = diff;\r\n  }\r\n\r\n  getDiff() {\r\n    return this.difficulty;\r\n  }\r\n\r\n  getType() {\r\n    return this.hintType;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { LinksService } from '../links/links.service';\r\nimport { UtilsService } from '../utils/utils.service';\r\nimport { FHTLX, FsSession } from '../../familySearchX/FHTLX';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FsService {\r\n\r\n  private isLoggedIn: boolean = false;\r\n\r\n  public FhtlX: FHTLX;\r\n\r\n  public fsSession: FsSession;\r\n\r\n  constructor(private http: HttpClient, private links: LinksService, private router: Router, private utils: UtilsService) {\r\n\r\n  }\r\n\r\n  /**\r\n   * Verify that the auth service is up and running before trying to redirect.\r\n   */\r\n  verifyAuthReady() {\r\n    return this.http.get(this.links.getAuthRedirect(`${window.location.origin}/home`), {\r\n      responseType: 'text',\r\n      observe: 'response'\r\n    });\r\n  }\r\n\r\n  isAuthenticated(): boolean {\r\n    return true;\r\n  }\r\n\r\n  setLoggedIn(fsSession: FsSession): void {\r\n    this.FhtlX.readyAccessToken(fsSession);\r\n    this.links.setHomeLoggedIn();\r\n    this.isLoggedIn = true;\r\n  }\r\n\r\n  logIn(fstoken: string) {\r\n    this.fsSession = this.parseJwt(fstoken);\r\n    this.initFhtlX();\r\n    this.FhtlX.storeSession(this.fsSession);\r\n    this.setLoggedIn(this.fsSession);\r\n  }\r\n\r\n  initFhtlX(): void {\r\n    let initOptions: any = {\r\n      environment: 'production',\r\n      appKey: 'app Key :)',\r\n      redirectUri: 'Put your redirect uri here if you want',\r\n      saveAccessToken: true\r\n    }\r\n\r\n    this.FhtlX = new FHTLX(initOptions);\r\n  }\r\n\r\n  checkLoginStatus(): boolean {\r\n    this.fsSession = FHTLX.checkAccessToken();\r\n\r\n    if (!!this.fsSession) {\r\n      this.initFhtlX();\r\n      this.setLoggedIn(this.fsSession);\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Takes a JWT token and returns the resulting javascript object.\r\n   * Called to parse the fstoken returned by the auth service upon\r\n   * successfully logging in.\r\n   * @param token a JWT token with FsSession info\r\n   */\r\n  parseJwt(token: string): FsSession {\r\n    let base64Url = token.split('.')[1];\r\n    let base64 = base64Url.replace('-', '+').replace('_', '/');\r\n    return JSON.parse(window.atob(base64));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LinksService {\r\n\r\n  public readonly FHTL = {\r\n    auth: 'https://auth.familytech.byu.edu',\r\n    home: 'https://familytech.byu.edu',\r\n    contact: 'https://familytech.byu.edu/contact.html',\r\n    donate: 'https://familytech.byu.edu/donate.html',\r\n    people: 'https://familytech.byu.edu/people.html',\r\n    relativeFinder: 'https://www.relativefinder.org',\r\n    virtualPedigreee: 'http://virtual-pedigree.familytech.byu.edu',\r\n    descendancyExplorer: 'http://descend.familytech.byu.edu',\r\n    treeSweeper: 'https://treesweeper.familytech.byu.edu',\r\n    brownie: 'https://familytech.byu.edu/apps/brownie.html', //TODO change once brownie is actually released\r\n    pedigreePie: 'http://pedigree-pie.familytech.byu.edu',\r\n    onePageGenealogy: 'http://opg.familytech.byu.edu',\r\n    familyCalendar: 'https://calendar.familytech.byu.edu',\r\n    geneopardy: 'https://geneopardy.familytech.byu.edu',\r\n    wheelOfFamilyFortune: 'https://wheel.familytech.byu.edu',\r\n    ancestorGames: 'https://ancestorgames.familytech.byu.edu',\r\n    recordQuest: 'https://recordquest.familytech.byu.edu',\r\n  }\r\n\r\n  public readonly FS: string = 'https://www.familysearch.org/'\r\n\r\n  public readonly APP_NAME: string = 'AngularTemplate';\r\n\r\n  private home: string = 'start';\r\n\r\n  public mainMenu = [\r\n    { name: 'Home', href: 'home', icon: 'home' },\r\n    //{name: 'Help', href: 'help', icon: 'help'},\r\n    { name: 'Contact', href: 'https://familytech.byu.edu/contact.html', icon: 'contact_mail' },\r\n    //{name: 'About', href: 'about'},\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  getHome(): string {\r\n    return this.home;\r\n  }\r\n\r\n  setHomeLoggedIn(): void {\r\n    this.home = 'home';\r\n    this.mainMenu.push({\r\n      name: 'Logout',\r\n      href: 'logout',\r\n      icon: 'supervised_user'\r\n    });\r\n  }\r\n\r\n  logOut() {\r\n    this.mainMenu.pop();\r\n    this.home = 'start';\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param redirect the url to return to upon signing in. Defaults to the current url \r\n   */\r\n  public getAuthRedirect(redirect = window.location.href): string {\r\n    return `${this.FHTL.auth}?redirect=${redirect}`;\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Overlay, ComponentType } from '@angular/cdk/overlay';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UtilsService {\r\n\r\n  constructor(private dialog: MatDialog, private overlay: Overlay, private snackBar: MatSnackBar) { }\r\n\r\n  /**\r\n   * Displays the given modal component, and injects the data.\r\n   * @param component \r\n   * @param data \r\n   * @param width \r\n   * @param height \r\n   */\r\n  displayModal(component: ComponentType<any>, data: any, width = '600px', height = 'auto'): MatDialogRef<ComponentType<any>, any> {\r\n    let dialogRef = this.dialog.open(component, {\r\n      data: data,\r\n      width: width,\r\n      height: height,\r\n      scrollStrategy: this.overlay.scrollStrategies.block()\r\n    });\r\n\r\n    return dialogRef;\r\n  }\r\n\r\n  /**\r\n   * Displays a material snackbar with message and button\r\n   * @param message \r\n   * @param buttonText \r\n   */\r\n  displaySnack(message: string, buttonText: string) {\r\n    let snackBarRef = this.snackBar.open(message, buttonText);\r\n\r\n    setTimeout(() => {\r\n      if (!!snackBarRef) {\r\n        snackBarRef.dismiss();\r\n      }\r\n    }, 6000);\r\n  }\r\n\r\n  /**\r\n   * Takes a string and hashes in into a hex color.\r\n   * @param str\r\n   */\r\n  stringToColor(str) {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    let color = '#';\r\n    for (let i = 0; i < 3; i++) {\r\n      let value = (hash >> (i * 8)) & 0xFF;\r\n      color += ('00' + value.toString(16)).substr(-2);\r\n    }\r\n    return color;\r\n  }\r\n\r\n  // from stackoverflow https://stackoverflow.com/questions/5560248/programmatically-lighten-or-darken-a-hex-color-or-rgb-and-blend-colors\r\n  shadeColor(color, percent) {\r\n    let f = parseInt(color.slice(1), 16), t = percent < 0 ? 0 : 255, p = percent < 0 ? percent * -1 : percent, R = f >> 16, G = f >> 8 & 0x00FF, B = f & 0x0000FF;\r\n    return \"#\" + (0x1000000 + (Math.round((t - R) * p) + R) * 0x10000 + (Math.round((t - G) * p) + G) * 0x100 + (Math.round((t - B) * p) + B)).toString(16).slice(1);\r\n  }\r\n\r\n  /**\r\n   * Takes a string and converts it to a color (a hash such that all events of a given name will return the same color).\r\n   * The resulting color is then converted into an object representing the state and color of a material design checkbox,\r\n   * e.g. primary and secondary colors, and whether the checkbox is active or not (set to true for all).\r\n   * @param str \r\n   */\r\n  stringToColors(str) {\r\n    let color = this.stringToColor(str);\r\n    return {\r\n      primary: color,\r\n      secondary: this.shadeColor(color, 0.5),\r\n      active: true\r\n    }\r\n  }\r\n\r\n  /**\r\n   * FamilySearch events have date strings with (potentally), a start date, end date,\r\n   * and year. If the data is in a recognizable format, it will parse the dates and return them. \r\n   * @param date \r\n   */\r\n  parseDates(date: string): [Date, Date, string] {\r\n    if(!!date && Number.isInteger(parseInt(date[0])) && date.split('/')[0].length > 4) { \r\n      let dates = date.split('/');\r\n\r\n      let year = dates[0].split(' ').pop();\r\n      return [new Date(dates[0]), new Date(dates[1]), year];\r\n    } else {\r\n      return [undefined, undefined, undefined];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Parses the event type from the fs info\r\n   * @param type the event type\r\n   */\r\n  parseType(type: string) {\r\n    return decodeURIComponent(type.split('/').pop().toLowerCase()).replace('data:,', '');\r\n  }\r\n\r\n}\r\n","// This file can be replaced during build by using the `fileReplacements` array.\r\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\r\n// The list of file replacements can be found in `angular.json`.\r\n\r\nexport const environment = {\r\n  production: false\r\n};\r\n\r\n/*\r\n * For easier debugging in development mode, you can import the following file\r\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\r\n *\r\n * This import should be commented out in production mode because it will have a negative impact\r\n * on performance if an error is thrown.\r\n */\r\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\r\n","\r\nimport { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n"],"names":[],"sourceRoot":"webpack:///"}